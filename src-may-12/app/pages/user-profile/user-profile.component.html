<div class="header bg-gradient-dark pb-8 pt-5 pt-md-8">
  <div class="container-fluid">
    <div class="header-body"></div>
  </div>
</div>
<div class="container-fluid mt--7">
  <div class="row">
    <div class="col-xl-6 order-xl-2 mb-5 mb-xl-0">
      <div class="card card-profile shadow h-100">
        <div class="row justify-content-center">
          <div class="col-lg-3 order-lg-2">
            <!-- <div class="card-profile-image">
              <img
                [src]="(authService.user$ | async)?.image"
                class="rounded-circle"
              />
            </div> -->
          </div>
        </div>
        <div class="card-header text-center border-0  ">
          <div class="d-flex justify-content-between align-items-center">
            <div class="card-profile-image">
              <img
                [src]="(authService.user$ | async)?.image"
                class="rounded-circle"
              />
            </div>
            <button
              type="button"
              (click)="onOpenModal(profileModal)"
              class="btn   btn-primary  "
            >
              Edit profile
            </button>
          </div>
        </div>
        <div class="card-body pt-0 pt-md-4">

          <div class="row d-none">
            <div class="col">
              <div
                class="card-profile-stats d-flex justify-content-center"
              >
                <div>
                  <!-- <span class="heading">{{ data?.usersCount }}</span>
                  <span class="description">Users</span> -->
                </div>
                <div>
                  <!-- <span class="heading">{{ data?.usersCount }}</span>
                  <span class="description">Products</span> -->
                </div>
                <div>
                  <!-- <span class="heading">{{ data?.usersCount }}</span>
                  <span class="description">Requests</span> -->
                </div>
              </div>
            </div>
          </div>
          <!-- <div class="text-center">
            <ul class="spr-admin-list">
              <li>
                {{ authUser?.name }}
                <span class=""> , {{ authUser?.getAdminGender() }} </span>
              </li>
              <li>
                <i class="ni location_pin mr-2"></i>
                {{ authUser?.email }}
              </li>
              <li>
                <i class="ni location_pin mr-2"></i>
                {{ authUser?.phone }}
              </li>
              <li>
                <i class="ni business_briefcase-24 mr-2"></i>
                {{ authUser?.getAdminRole() }}
              </li>
            </ul>
          </div> -->
          <!-- profile view wrapper -->
          <div class="user-profile-wrapper bg-secondary p-3 pt-4">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for=""> <i class="fa fa-user"></i>&nbsp;First name</label>
                  <p>{{ authUser?.first_name }}</p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for=""> <i class="fa fa-user"></i>&nbsp; Last name</label>
                  <p>{{ authUser?.last_name }}</p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for=""><i class="fa fa-user-circle"></i>&nbsp; Role</label>
                  <p>{{ authUser?.getAdminRole() }}</p>
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-group">
                  <label for=""><i class="fa fa-envelope"></i>&nbsp; Email</label>
                  <p>{{ authUser?.email }}</p>
                </div>
              </div>
              <!-- <div class="col-md-6">
                <div class="form-group">
                  <label for=""><i class="fa fa-phone"></i>&nbsp; Mobile No.</label>
                  <p>{{ authUser?.phone }}</p>
                </div>
              </div> -->
              <!-- <div class="col-md-6">
                <div class="form-group">
                  <label for=""><i class="fa fa-user"></i>&nbsp; Address</label>
                  <p>{{ authUser?.address }}</p>
                </div>
              </div> -->

            </div>
          </div>
          <!-- profile view wrapper -->

        </div>
      </div>
    </div>
    <div class="col-xl-6 order-xl-1">
      <div class="card bg-secondary shadow">
        <div class="card-header bg-white border-0">
          <div class="row align-items-center">
            <div class="col-8">
              <h3 class="mb-0">Change password</h3>
            </div>
          </div>
        </div>
        <div class="card-body">
          <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()">
            <div class="px-lg-4">
              <div class="row">
                <div class="col-lg-12">
                  <div class="form-group">
                    <label class="form-control-label" for="current-password">
                      Current password
                    </label>
                    <div class="input-group input-group-alternative">

                      <input
                        [type]="passwordType"
                        id="current-password"
                        class="form-control form-control-alternative"
                        placeholder="Current password"
                        formControlName="old_password"
                        autocomplete="current-password"
                        maxlength="40"
                      />
                      <input hidden type="text" autocomplete="username" />
                      <div
                        (click)="
                          passwordType =
                            passwordType === 'password' ? 'text' : 'password'
                        "
                        class="input-group-append"
                      >
                        <span class="input-group-text">
                          <i
                            [class]="
                              passwordType === 'password'
                                ? 'fa fa-eye'
                                : 'fa fa-eye-slash'
                            "
                          ></i>
                        </span>
                      </div>
                    </div>
                    <small
                      class="form-text text-danger form-error"
                      *ngIf="
                        changePasswordForm
                          .get('old_password')
                          .hasError('required') &&
                        (changePasswordForm.get('old_password').dirty ||
                          changePasswordForm.get('old_password').touched ||
                          submitted)
                      "
                    >
                      Please enter current password
                    </small>
                    <small
                      class="form-text text-danger form-error"
                      *ngIf="
                        !changePasswordForm
                          .get('old_password')
                          .hasError('required') &&
                        changePasswordForm
                          .get('old_password')
                          .hasError('incorrectPassword')
                      "
                    >
                      {{ errMessage }}
                    </small>
                  </div>
                </div>
                <div class="col-lg-12">
                  <div class="form-group">
                    <label class="form-control-label" for="new-password">
                      New password
                    </label>
                    <div class="input-group input-group-alternative">
                      <input
                        [type]="newPasswordType"
                        id="new-password"
                        class="form-control form-control-alternative"
                        placeholder="New password"
                        formControlName="new_password"
                        autocomplete="off"
                        maxlength="40"
                      />
                      <div
                        (click)="
                          newPasswordType =
                            newPasswordType === 'password' ? 'text' : 'password'
                        "
                        class="input-group-append"
                      >
                        <span class="input-group-text">
                          <i
                            [class]="
                              newPasswordType === 'password'
                                ? 'fa fa-eye'
                                : 'fa fa-eye-slash'
                            "
                          ></i>
                        </span>
                      </div>
                    </div>
                    <small
                      class="form-text text-danger form-error"
                      *ngIf="
                        changePasswordForm
                          .get('new_password')
                          .hasError('required') &&
                        (changePasswordForm.get('new_password').dirty ||
                          changePasswordForm.get('new_password').touched ||
                          submitted)
                      "
                    >
                      Please enter new password
                    </small>
                    <small
                      class="form-text text-danger form-error"
                      *ngIf="
                        !changePasswordForm
                          .get('new_password')
                          .hasError('required') &&
                        changePasswordForm.get('new_password').invalid &&
                        (changePasswordForm.get('new_password').dirty ||
                          changePasswordForm.get('new_password').touched ||
                          submitted)
                      "
                    >
                      New password length must be at least 6 characters
                    </small>
                    <small
                      class="form-text text-danger form-error"
                      *ngIf="
                        changePasswordForm.get('new_password').valid &&
                        changePasswordForm.get('old_password').valid &&
                        changePasswordForm.get('new_password').value ===
                          changePasswordForm.get('old_password').value
                      "
                    >
                      New password should be different from current password
                    </small>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-12">
                  <div class="form-group">
                    <label class="form-control-label" for="confirm-password">
                      Confirm password
                    </label>

                    <div class="input-group input-group-alternative">
                      <input
                        [type]="confirmPasswordType"
                        id="confirm-password"
                        class="form-control form-control-alternative"
                        placeholder="Confirm password"
                        formControlName="cpassword"
                        autocomplete="off"
                        maxlength="40"
                      />
                      <div
                        (click)="
                          confirmPasswordType =
                            confirmPasswordType === 'password'
                              ? 'text'
                              : 'password'
                        "
                        class="input-group-append"
                      >
                        <span class="input-group-text">
                          <i
                            [class]="
                              confirmPasswordType === 'password'
                                ? 'fa fa-eye'
                                : 'fa fa-eye-slash'
                            "
                          ></i>
                        </span>
                      </div>
                    </div>
                    <small
                      class="form-text text-danger form-error"
                      *ngIf="
                        changePasswordForm
                          .get('cpassword')
                          .hasError('required') &&
                        (changePasswordForm.get('cpassword').dirty ||
                          changePasswordForm.get('cpassword').touched ||
                          submitted)
                      "
                    >
                      Please enter confirm password
                    </small>
                    <small
                      class="form-text text-danger form-error"
                      *ngIf="
                        changePasswordForm.get('new_password').valid &&
                        changePasswordForm.get('cpassword').valid &&
                        changePasswordForm.get('new_password').value !==
                          changePasswordForm.get('cpassword').value
                      "
                    >
                      New password and confirm password should be same
                    </small>
                  </div>
                </div>
              </div>
            </div>
            <div class="text-center">
              <button type="submit" class="btn btn-primary my-4">
                Change password
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #profileModal let-modal>
  <div class="modal-content">
    <div class="modal-header">
      <h3>Update profile</h3>
      <button
        type="button"
        class="close"
        aria-label="Close"
        (click)="modal.dismiss('Cross click')"
      >
        <span aria-hidden="true">×</span>
      </button>
    </div>
    <form [formGroup]="updateProfileForm" (ngSubmit)="onSubmitUpdateForm()">
      <div class="modal-body">
        <!-- <h6 class="heading-small text-muted mb-4">User information</h6> -->
        <div class="px-lg-4">
          <div class="row">
            <div class="col-lg-12">
              <div class="form-group">
                <label class="form-control-label" for="first_name"> First name </label>
                <input
                  id="first_name"
                  class="form-control form-control-alternative"
                  placeholder="First name"
                  formControlName="first_name"
                  autocomplete="first_name"
                  maxlength="40"
                />
                <small
                  class="form-text text-danger"
                  *ngIf="
                    updateProfileForm.get('first_name').hasError('required') &&
                    (updateProfileForm.get('first_name').dirty ||
                      updateProfileForm.get('first_name').touched ||
                      profileSubmitted)
                  "
                >
                  Please enter first name
                </small>
              </div>
            </div>
            <div class="col-lg-12">
              <div class="form-group">
                <label class="form-control-label" for="last_name"> Last name </label>
                <input
                  id="last_name"
                  class="form-control form-control-alternative"
                  placeholder="Last name"
                  formControlName="last_name"
                  autocomplete="last_name"
                  maxlength="40"
                />
                <small
                  class="form-text text-danger"
                  *ngIf="
                    updateProfileForm.get('last_name').hasError('required') &&
                    (updateProfileForm.get('last_name').dirty ||
                      updateProfileForm.get('last_name').touched ||
                      profileSubmitted)
                  "
                >
                  Please enter last name
                </small>
              </div>
            </div>
            <div class="col-lg-12">
              <div class="form-group">
                <label class="form-control-label" for="email"> Email </label>
                <input
                  id="email"
                  class="form-control form-control-alternative"
                  placeholder="Email"
                  formControlName="email"
                  autocomplete="email"
                  maxlength="40"
                />
                <small
                  class="form-text text-danger"
                  *ngIf="
                    updateProfileForm.get('email').hasError('required') &&
                    (updateProfileForm.get('email').dirty ||
                      updateProfileForm.get('email').touched ||
                      profileSubmitted)
                  "
                >
                  Please enter email
                </small>
                <small
                  class="form-text text-danger"
                  *ngIf="
                    !updateProfileForm.get('email').hasError('required') &&
                    updateProfileForm.get('email').hasError('pattern')
                  "
                >
                  Please enter valid email
                </small>
                <small
                  class="form-text text-danger"
                  *ngIf="
                    !updateProfileForm.get('email').hasError('required') &&
                    !updateProfileForm.get('email').hasError('pattern') &&
                    updateProfileForm.get('email').hasError('alreadyExist')
                  "
                >
                  {{ errMessage }}
                </small>
              </div>
            </div>
          </div>
          <!-- <div class="row">
            <div class="col-lg-12">
              <div class="form-group">
                <label class="form-control-label" for="phoneNumber">
                  Phone number
                </label>
                <input
                  appOnlyNumber
                  id="phoneNumber"
                  class="form-control form-control-alternative"
                  placeholder="Phone number"
                  formControlName="phone"
                  autocomplete="mobile"
                  maxlength="15"
                />
                <small
                  class="form-text text-danger"
                  *ngIf="
                    updateProfileForm.get('phone').hasError('required') &&
                    (updateProfileForm.get('phone').dirty ||
                      updateProfileForm.get('phone').touched ||
                      profileSubmitted)
                  "
                >
                  Please enter phone number
                </small>
                <small
                  class="form-text text-danger"
                  *ngIf="
                    !updateProfileForm.get('phone').hasError('required') &&
                    updateProfileForm.get('phone').hasError('pattern')
                  "
                >
                  Please enter valid phone number
                </small>
                <small
                  class="form-text text-danger"
                  *ngIf="
                    !updateProfileForm.get('phone').hasError('required') &&
                    !updateProfileForm.get('phone').hasError('pattern') &&
                    updateProfileForm.get('phone').hasError('alreadyExist')
                  "
                >
                  {{ errMessage }}
                </small>
              </div>
            </div>
            <div class="col-lg-12">
              <div class="form-group">
                <label class="form-control-label" for="address"> Address </label>
                <input
                  id="address"
                  class="form-control form-control-alternative"
                  placeholder="Address"
                  formControlName="address"
                  autocomplete="street-address"
                  maxlength="100"
                />
                <small
                  class="form-text text-danger"
                  *ngIf="
                    updateProfileForm.get('address').hasError('required') &&
                    (updateProfileForm.get('address').dirty ||
                      updateProfileForm.get('address').touched ||
                      profileSubmitted)
                  "
                >
                  Please enter address
                </small>
              </div>
            </div> -->
            <!-- <div class="col-lg-12">
              <div class="form-group">
                <label class="form-control-label" for="gender"> Gender </label>
                <div class="custom-control custom-radio mb-3">
                  <input
                    formControlName="gender"
                    [value]="1"
                    class="custom-control-input"
                    id="male"
                    type="radio"
                  />
                  <label class="custom-control-label" for="male"> Male </label>
                </div>
                <div class="custom-control custom-radio mb-3">
                  <input
                    formControlName="gender"
                    [value]="2"
                    class="custom-control-input"
                    id="female"
                    checked=""
                    type="radio"
                  />
                  <label class="custom-control-label" for="female">
                    Female
                  </label>
                </div>
                <div class="custom-control custom-radio mb-3">
                  <input
                    formControlName="gender"
                    [value]="3"
                    class="custom-control-input"
                    id="other"
                    checked=""
                    type="radio"
                  />
                  <label class="custom-control-label" for="other">
                    Other
                  </label>
                </div>
                <small
                  class="form-text text-danger"
                  *ngIf="
                    updateProfileForm.get('gender').invalid && profileSubmitted
                  "
                >
                  Please select a gender
                </small>
              </div>
            </div> -->
          <!-- </div>  -->
        </div>
      </div>
      <div class="modal-footer justify-content-center">
        <button type="submit" class="btn btn-primary">
          Update profile
        </button>
      </div>
    </form>
  </div>
</ng-template>
