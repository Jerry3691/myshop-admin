"use strict";(self.webpackChunkmyshops_admin=self.webpackChunkmyshops_admin||[]).push([[987],{92987:function(I,E,u){u.d(E,{X:function(){return f}});var t=u(90189),i=u(11462),N=u(21248),T=u(25201),O=u(3492),Z=u(61116),b=u(24075),A=u(83745);function y(a,o){1&a&&(t.TgZ(0,"small",22),t._uU(1," Please enter consultant email "),t.qZA())}function C(a,o){1&a&&(t.TgZ(0,"small",22),t._uU(1," Please enter consultant Name "),t.qZA())}function q(a,o){1&a&&(t.TgZ(0,"small",22),t._uU(1," Please enter purchase order number "),t.qZA())}function c(a,o){if(1&a&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&a){var n=o.$implicit;t.Q6J("value",n),t.xp6(1),t.Oqu(n)}}function _(a,o){1&a&&(t.TgZ(0,"small",22),t._uU(1," Please select company name "),t.qZA())}function v(a,o){if(1&a&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&a){var n=o.$implicit;t.Q6J("value",n),t.xp6(1),t.Oqu(n)}}function p(a,o){1&a&&(t.TgZ(0,"small",22),t._uU(1,"Please select voucher amount "),t.qZA())}function l(a,o){1&a&&(t.TgZ(0,"small",22),t._uU(1,"Please enter voucher quantity "),t.qZA())}function m(a,o){if(1&a){var n=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(n);var r=t.oxw().index;return t.oxw().removeVoucherItem(r)}),t._UZ(1,"i",34),t.qZA()}}function h(a,o){if(1&a&&(t.ynx(0,24),t.TgZ(1,"div",25),t.TgZ(2,"div",26),t.TgZ(3,"div",27),t.TgZ(4,"label"),t._uU(5,"Voucher Amount"),t.qZA(),t.TgZ(6,"select",28),t.YNc(7,v,2,2,"option",13),t.qZA(),t.YNc(8,p,2,0,"small",7),t.qZA(),t.TgZ(9,"div",27),t.TgZ(10,"label",29),t._uU(11,"Voucher Quantity"),t.qZA(),t._UZ(12,"input",30),t.YNc(13,l,2,0,"small",7),t.qZA(),t.TgZ(14,"div",31),t.YNc(15,m,2,0,"button",32),t.qZA(),t.qZA(),t.qZA(),t.BQk()),2&a){var d,g,n=o.$implicit,e=o.index,r=t.oxw();t.Q6J("formGroupName",e),t.xp6(7),t.Q6J("ngForOf",r.amount),t.xp6(1),t.Q6J("ngIf",(null==n||null==(d=n.get("value"))?null:d.hasError("required"))&&((null==n?null:n.get("value").dirty)||(null==n?null:n.get("value").touched)||r.isSubmit)),t.xp6(4),t.Q6J("min",1),t.xp6(1),t.Q6J("ngIf",(null==n||null==(g=n.get("quantity"))?null:g.hasError("required"))&&((null==n?null:n.get("quantity").dirty)||(null==n?null:n.get("quantity").touched)||r.isSubmit)),t.xp6(2),t.Q6J("ngIf",0!=e)}}function s(a,o){if(1&a){var n=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){return t.CHM(n),t.oxw().addVoucherItem()}),t._uU(1,"Add Voucher"),t.qZA()}}var f=function(){function a(o,n,e,r){this.modal=o,this.ConsultantsService=n,this.fb=e,this.tostr=r,this.result=new t.vpe,this.emailGroup=this.fb.group({consultant_email:["",i.kI.required],consultant_name:["",i.kI.required],client_email:[""],client_name:[""],company_name:["",i.kI.required],voucher:this.fb.array([]),purchaseOrderNumber:["",i.kI.required],notes:[""]}),this.showAddButton=!0,this.company_name=[],this.amount=[],this.isSubmit=!1,this.responseObject=new Object}return a.prototype.ngOnInit=function(){var o=this;this.addVoucherItem(),this.data.response.forEach(function(r){o.responseObject.hasOwnProperty(r.company_name)?o.responseObject[r.company_name].push(r.value):o.responseObject[r.company_name]=[r.value]}),this.company_name=Object.keys(this.responseObject),this.amount=this.responseObject[this.company_name[0]].sort(function(r,d){return r-d}),this.emailGroup.patchValue({consultant_email:this.data.consultant_email,consultant_name:this.data.consultant_name,company_name:this.data.company_name,client_email:this.data.client_email,client_name:this.data.client_name,purchaseOrderNumber:this.data.purchaseOrderNumber}),this.data.amount&&this.emailGroup.get("voucher").at(0).patchValue({value:this.data.amount,quantity:1})},a.prototype.close=function(){this.modal.close()},a.prototype.onSubmit=function(){var o=this;if(this.isSubmit=!0,!this.emailGroup.invalid){var n={consultant_id:this.data.id,consultantEmail:this.emailGroup.value.consultant_email,consultant_name:this.emailGroup.value.consultant_name,client_email:this.emailGroup.value.client_email,client_name:this.emailGroup.value.client_name,company_name:this.emailGroup.value.company_name,purchaseOrderNumber:this.emailGroup.value.purchaseOrderNumber,notes:this.emailGroup.value.notes,vouchers:this.emailGroup.value.voucher.map(function(e){return{company_name:o.emailGroup.value.company_name,voucher_quantity:parseInt(e.quantity),value:parseInt(e.value)}}),type:this.data.type,request_voucher_id:this.data.request_voucher_id||null};this.ConsultantsService.sendEmail(n).subscribe({next:function(e){o.isSubmit=!1,o.modal.close(!0),o.tostr.success("Vouchers send successfully","Success"),o.result.emit(!0)},error:function(e){o.tostr.error(e().message||"Something went long","Error")}})}},a.prototype.addVoucherItem=function(){var o=this.emailGroup.get("voucher");o.push(this.fb.group({value:["",i.kI.required],quantity:["1",i.kI.required]})),o.length==this.amount.length&&(this.showAddButton=!1)},a.prototype.removeVoucherItem=function(o){var n=this.emailGroup.get("voucher");n.removeAt(o),n.length<this.amount.length&&(this.showAddButton=!0)},a.prototype.onCompanyNameChange=function(o){this.amount=this.responseObject[o.target.value].sort(function(d,g){return d-g});for(var e=this.emailGroup.get("voucher").controls.length,r=0;r<e;r++)this.removeVoucherItem(0);this.emailGroup.patchValue({voucher:this.addVoucherItem()})},a.\u0275fac=function(n){return new(n||a)(t.Y36(T.Kz),t.Y36(N.Y),t.Y36(i.qu),t.Y36(O._W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-email"]],inputs:{data:"data"},outputs:{result:"result"},decls:49,vars:8,consts:[[1,"modal-header"],[1,"modal-title"],[3,"formGroup","submit"],[1,"modal-body"],[1,"row","mb-3"],[1,"col-6"],["type","email","placeholder","Consultant Email","formControlName","consultant_email","readonly","",1,"form-control"],["class","form-text text-danger",4,"ngIf"],["type","text","placeholder","Consultant Name","formControlName","consultant_name","noExtraSpaces","","readonly","",1,"form-control"],["type","email","placeholder","Client Email","formControlName","client_email","noExtraSpaces","",1,"form-control"],["type","text","placeholder","Consultant Name","formControlName","client_name",1,"form-control"],["type","text","placeholder","Purchase Order Number","formControlName","purchaseOrderNumber","maxlength","40",1,"form-control"],["formControlName","company_name",1,"custom-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],["formArrayName","voucher",1,"row"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],[1,"mb-3"],["formControlName","notes","rows","4",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"form-text","text-danger"],[3,"value"],[3,"formGroupName"],[1,"col-6","mb-3"],[1,"row"],[1,"col-5"],["formControlName","value",1,"custom-select"],["for",""],["type","text","formControlName","quantity","appOnlyNumber","","maxlength","3",1,"form-control",3,"min"],[1,"col-2","align-self-end"],["type","button","class","btn btn-danger","style","cursor: pointer;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger",2,"cursor","pointer",3,"click"],[1,"fa","fa-trash"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"h2",1),t._uU(2,"Delivery Address Details"),t.qZA(),t.qZA(),t.TgZ(3,"form",2),t.NdJ("submit",function(){return e.onSubmit()}),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"label"),t._uU(8,"Consultant Email"),t.qZA(),t._UZ(9,"input",6),t.YNc(10,y,2,0,"small",7),t.qZA(),t.TgZ(11,"div",5),t.TgZ(12,"label"),t._uU(13,"Consultant Name"),t.qZA(),t._UZ(14,"input",8),t.YNc(15,C,2,0,"small",7),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19,"Client Email"),t.qZA(),t._UZ(20,"input",9),t.qZA(),t.TgZ(21,"div",5),t.TgZ(22,"label"),t._uU(23,"Client Name"),t.qZA(),t._UZ(24,"input",10),t.qZA(),t.qZA(),t.TgZ(25,"div",4),t.TgZ(26,"div",5),t.TgZ(27,"label"),t._uU(28,"Purchase Order Number"),t.qZA(),t._UZ(29,"input",11),t.YNc(30,q,2,0,"small",7),t.qZA(),t.TgZ(31,"div",5),t.TgZ(32,"label"),t._uU(33,"Voucher Company Name"),t.qZA(),t.TgZ(34,"select",12),t.NdJ("change",function(Y){return e.onCompanyNameChange(Y)}),t.YNc(35,c,2,2,"option",13),t.qZA(),t.YNc(36,_,2,0,"small",7),t.qZA(),t.qZA(),t.TgZ(37,"div",14),t.YNc(38,h,16,6,"ng-container",15),t.qZA(),t.YNc(39,s,2,0,"button",16),t.TgZ(40,"div",17),t.TgZ(41,"label"),t._uU(42,"Notes"),t.qZA(),t._UZ(43,"textarea",18),t.qZA(),t.qZA(),t.TgZ(44,"div",19),t.TgZ(45,"button",20),t.NdJ("click",function(){return e.close()}),t._uU(46,"Cancel"),t.qZA(),t.TgZ(47,"button",21),t._uU(48,"Submit"),t.qZA(),t.qZA(),t.qZA()),2&n){var G,r=void 0,d=void 0,g=void 0,U=void 0;t.xp6(3),t.Q6J("formGroup",e.emailGroup),t.xp6(7),t.Q6J("ngIf",(null==(r=e.emailGroup.get("consultant_email"))?null:r.hasError("required"))&&(e.emailGroup.get("consultant_email").dirty||e.emailGroup.get("consultant_email").touched||e.isSubmit)),t.xp6(5),t.Q6J("ngIf",(null==(d=e.emailGroup.get("consultant_name"))?null:d.hasError("required"))&&(e.emailGroup.get("consultant_name").dirty||e.emailGroup.get("consultant_name").touched||e.isSubmit)),t.xp6(15),t.Q6J("ngIf",(null==(g=e.emailGroup.get("purchaseOrderNumber"))?null:g.hasError("required"))&&(e.emailGroup.get("purchaseOrderNumber").dirty||e.emailGroup.get("purchaseOrderNumber").touched||e.isSubmit)),t.xp6(5),t.Q6J("ngForOf",e.company_name),t.xp6(1),t.Q6J("ngIf",(null==(U=e.emailGroup.get("company_name"))?null:U.hasError("required"))&&(e.emailGroup.get("company_name").dirty||e.emailGroup.get("company_name").touched||e.isSubmit)),t.xp6(2),t.Q6J("ngForOf",null==(G=e.emailGroup.get("voucher"))?null:G.controls),t.xp6(1),t.Q6J("ngIf",e.showAddButton)}},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,Z.O5,b.v,i.nD,i.EJ,Z.sg,i.CE,i.YN,i.Kr,i.x0,A.p],styles:[""]}),a}()},21248:function(I,E,u){u.d(E,{Y:function(){return q}});var t=function(){return t=Object.assign||function(c){for(var _,v=1,p=arguments.length;v<p;v++)for(var l in _=arguments[v])Object.prototype.hasOwnProperty.call(_,l)&&(c[l]=_[l]);return c},t.apply(this,arguments)},Z=t({production:!0,firebase:{apiKey:"AIzaSyAhHtc2wBamtKlAiYgxBqLNvPT9gYYQsYE",authDomain:"myshops.firebaseapp.com",projectId:"myshops",storageBucket:"myshops.appspot.com",messagingSenderId:"455636895736",appId:"1:455636895736:web:88c8b12aa2a395debeb80d",measurementId:"G-HREY9J2YC8",vapidKey:"BKqAbkilN8Ri0sQ4TJ70bBc2OR4rACXb3hquU-8w-aekMEUxN0BdyUGEPj2j_Cl7-W3LfTTFkziYpOeRTEdEuYI"}},{endPoint:"http://3.27.198.152:3000/api/v1/",serverUrl:"http://3.27.198.152:3000/"}),b=u(42693),A=u(23278),y=u(90189),C=u(85424),q=function(){function c(_,v){var p=this;this.router=_,this.httpService=v,this.serverUrl=Z.serverUrl,this.addConsultants=function(l){return p.httpService.postRequest("users",l)},this.getConsultantsList=function(l,m,h){void 0===l&&(l=""),void 0===m&&(m=1),void 0===h&&(h=10);var s=new b.LE;return l&&(s=s.set("search",l)),m&&(s=s.set("page",m)),h&&(s=s.set("per_page",h)),p.httpService.getRequest("users",s)},this.getConsultantsDetails=function(l){return p.httpService.getRequest("users/"+l)},this.updateConsultantStatus=function(l,m){return p.httpService.patchRequest("auth/",{id:l,isApprove:m})},this.deleteConsultant=function(l,m,h,s){void 0===m&&(m=""),void 0===h&&(h=1),void 0===s&&(s=10);var f=new b.LE;return m&&(f=f.set("search",m)),h&&(f=f.set("page",h)),s&&(f=f.set("per_page",s)),p.httpService.deleteRequest("users/"+l,f)},this.sendEmail=function(l){return p.httpService.postRequest("voucher/send-voucher-email-to-consultant",l)},this.getCompanyVoucherPrices=function(){return p.httpService.getRequest("voucher/get-company-voucher-prices")}}return c.\u0275fac=function(v){return new(v||c)(y.LFG(C.F0),y.LFG(A.O))},c.\u0275prov=y.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c}()}}]);