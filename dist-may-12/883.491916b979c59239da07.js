"use strict";(self.webpackChunkmyshops_admin=self.webpackChunkmyshops_admin||[]).push([[883],{883:function(X,y,c){c.r(y),c.d(y,{CategoriesModule:function(){return $}});var g=c(11462),l=c(85424),p=c(3277),e=c(90189),v=c(3492),u=c(61116),Z=c(68020);function T(t,n){1&t&&(e.TgZ(0,"small",27),e._uU(1," Please enter category name "),e.qZA())}var A=function(){function t(n,o,r){var i=this;this.categoriesService=n,this.toastrService=o,this.fb=r,this.addCategoryForm=this.fb.group({name:["",g.kI.required],parent_id:[null]}),this.submitted=!1,this.categories=[],this.onSubmit=function(){i.submitted=!0,i.addCategoryForm.invalid||i.categoriesService.addCategory({name:i.addCategoryForm.value.name,parent_id:i.addCategoryForm.value.parent_id?i.addCategoryForm.value.parent_id.data:null}).subscribe({next:function(a){i.toastrService.success("Category added successfully"),i.submitted=!1,i.addCategoryForm.reset()}.bind(i),error:function(a){i.toastrService.error(a().message||"Something went wrong")}.bind(i)})}}return t.prototype.ngOnInit=function(){var n=this;this.categoriesSubscription=this.categoriesService.modifiedCategoryDropdownList$.subscribe(function(o){console.log(o),n.categories=o})},t.\u0275fac=function(o){return new(o||t)(e.Y36(p.G),e.Y36(v._W),e.Y36(g.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-category"]],decls:35,vars:3,consts:[[1,"header","bg-gradient-dark","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"row"],[1,"container-fluid","mt--7"],[1,"row","justify-content-center"],[1,"col-xl-6"],[1,"card","bg-secondary","shadow"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-8"],[1,"mb-0"],["routerLink","/categories",1,"btn","btn-sm"],[1,"fa","fa-arrow-left"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"px-lg-4"],[1,"col-lg-12"],[1,"form-group"],["for","name",1,"form-control-label"],[2,"color","red"],["id","name","placeholder","Category name","formControlName","name","autocomplete","name","maxlength","50",1,"form-control","form-control-alternative"],["class","form-text text-danger form-error",4,"ngIf"],["for","category",1,"form-control-label"],["formControlName","parent_id","placeholder","---",3,"options"],[1,"text-center"],["type","submit",1,"btn","btn-primary","my-4"],[1,"form-text","text-danger","form-error"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"div",3),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.TgZ(8,"div",8),e.TgZ(9,"div",9),e.TgZ(10,"div",10),e.TgZ(11,"h3",11),e.TgZ(12,"a",12),e._UZ(13,"i",13),e.qZA(),e._uU(14,"\xa0 Add Category "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",14),e.TgZ(16,"form",15),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(17,"div",16),e.TgZ(18,"div",3),e.TgZ(19,"div",17),e.TgZ(20,"div",18),e.TgZ(21,"label",19),e._uU(22," Category name "),e.TgZ(23,"sup",20),e._uU(24,"*"),e.qZA(),e.qZA(),e._UZ(25,"input",21),e.YNc(26,T,2,0,"small",22),e.qZA(),e.qZA(),e.TgZ(27,"div",17),e.TgZ(28,"div",18),e.TgZ(29,"label",23),e._uU(30," Parent category "),e.qZA(),e._UZ(31,"p-treeSelect",24),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"div",25),e.TgZ(33,"button",26),e._uU(34," Add category "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(16),e.Q6J("formGroup",r.addCategoryForm),e.xp6(10),e.Q6J("ngIf",r.addCategoryForm.get("name").hasError("required")&&(r.addCategoryForm.get("name").dirty||r.addCategoryForm.get("name").touched||r.submitted)),e.xp6(5),e.Q6J("options",r.categories))},directives:[l.yS,g._Y,g.JL,g.sg,g.Fj,g.JJ,g.u,g.nD,u.O5,Z.mP],styles:["","[_nghost-%COMP%]     .p-treeselect {\n      width:100%;\n      display: inline-flex;\n  }\n  [_nghost-%COMP%]     .p-treeselect:hover {\n      border-color:none;\n  }"]}),t}(),q=c(59937),m=c(99713),f=c(25201),x=c(90065);function S(t,n){}var C=function(t){return{category:t}};function w(t,n){if(1&t&&(e.ynx(0),e.YNc(1,S,0,0,"ng-template",13),e.BQk()),2&t){var o=n.$implicit;e.oxw();var r=e.MAs(16);e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(2,C,o))}}function O(t,n){if(1&t&&e._UZ(0,"i"),2&t){var o=e.oxw().category;e.Tol(o.show?"fa fa-chevron-down":"fa fa-chevron-right")}}function P(t,n){}function F(t,n){if(1&t&&(e.ynx(0),e.YNc(1,P,0,0,"ng-template",13),e.BQk()),2&t){var o=n.$implicit;e.oxw(4);var r=e.MAs(16);e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(2,C,o))}}function M(t,n){if(1&t&&(e.ynx(0),e.YNc(1,F,2,4,"ng-container",11),e.BQk()),2&t){var o=e.oxw(2).category;e.xp6(1),e.Q6J("ngForOf",o.subcategories)}}function U(t,n){if(1&t&&(e.TgZ(0,"li"),e.YNc(1,M,2,1,"ng-container",26),e.qZA()),2&t){var o=e.oxw().category;e.Q6J("@collapse",o.show?"open":"closed"),e.xp6(1),e.Q6J("ngIf",o.subcategories)}}function J(t,n){if(1&t){var o=e.EpF();e.TgZ(0,"div",14),e.TgZ(1,"ul",15),e.TgZ(2,"li",16),e.TgZ(3,"span",17),e.NdJ("click",function(){var a=e.CHM(o).category;return e.oxw().toggleRow(a)}),e.YNc(4,O,1,2,"i",18),e._uU(5),e.qZA(),e.TgZ(6,"div",19),e.TgZ(7,"a",20),e._UZ(8,"i",21),e.qZA(),e.TgZ(9,"div",22),e.TgZ(10,"a",23),e.NdJ("click",function(){var a=e.CHM(o).category;return e.oxw().deleteCategory(a.id,1)}),e._uU(11," Delete category "),e.qZA(),e.TgZ(12,"a",24),e._uU(13," Edit category "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"ul",25),e.YNc(15,U,2,2,"li",26),e.qZA(),e.qZA()}if(2&t){var r=n.category;e.xp6(4),e.Q6J("ngIf",r.subcategories.length),e.xp6(1),e.hij(" ",r.name," "),e.xp6(7),e.Q6J("routerLink","/categories/edit/"+r.id),e.xp6(3),e.Q6J("ngIf",r.subcategories)}}var Y=function(){function t(n,o,r,i,s){var a=this;this.route=n,this.router=o,this.categoriesService=r,this.toastrService=i,this.modalService=s,this.categories=[],this.currentPage=1,this.totalPage=1,this.perPage=10,this.count=1,this.onPageChange=function(d){a.currentPage=d,a.navigateRoute()},this.navigateRoute=function(){a.router.navigate([],{relativeTo:a.route,queryParams:{page:a.currentPage}})},this.deleteCategory=function(d,z){var _=a.modalService.open(q.p,{centered:!0});_.componentInstance.data={title:"You are about to delete a category.",body:"This will delete the category permanently.",confirmButtonText:"Delete category",cancelButtonText:"Cancel"},_.closed.subscribe(function(V){V&&a.categoriesService.deleteCategory(d,z).subscribe({next:function(b){a.categoriesService.setCategoryValueAfterDeleteCategory(d),a.toastrService.success("Category deleted successfully")}.bind(a),error:function(b){a.toastrService.error(b().message||"Something went wrong")}.bind(a)})})}}return t.prototype.toggleRow=function(n){n.show=!n.show},t.prototype.ngOnInit=function(){var n=this;this.categoriesSubscription=this.categoriesService.modifiedCategoryList$.subscribe(function(o){n.categories=o})},t.prototype.ngOnDestroy=function(){this.categoriesSubscription&&this.categoriesSubscription.unsubscribe()},t.\u0275fac=function(o){return new(o||t)(e.Y36(l.gz),e.Y36(l.F0),e.Y36(p.G),e.Y36(v._W),e.Y36(f.FF))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-categories-list"]],decls:17,vars:1,consts:[[1,"row"],[1,"col-12","text-right"],["routerLink","/categories/add",1,"btn","btn-primary"],[1,"container-fluid","mt--7"],[1,"row","justify-content-center"],[1,"col-xl-6"],[1,"card","shadow"],[1,"card-header","border-0"],[1,"mb-0"],[1,"card-body","pt-0"],[1,"categories_outer"],[4,"ngFor","ngForOf"],["displayCategory",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cat_list"],[1,"pl-0"],[1,"dropdown-fixed","parent-item"],[3,"click"],[3,"class",4,"ngIf"],["ngbDropdown",""],["ngbDropdownToggle","",1,"btn","btn-sm","btn-icon-only","text-primary"],[1,"fas","fa-ellipsis-v"],["ngbDropdownMenu","",1,"dropdown-menu-right","dropdown-menu-arrow"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],[1,"dropdown-item",3,"routerLink"],[1,"child-item"],[4,"ngIf"]],template:function(o,r){1&o&&(e.TgZ(0,"app-page-header"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"a",2),e._uU(4," Add New Category "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"h3",8),e._uU(11,"All Categories"),e.qZA(),e.qZA(),e.TgZ(12,"div",9),e.TgZ(13,"div",10),e.YNc(14,w,2,4,"ng-container",11),e.qZA(),e.qZA(),e.YNc(15,J,16,4,"ng-template",null,12,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(14),e.Q6J("ngForOf",r.categories))},directives:[x.q,l.yS,u.sg,u.tP,u.O5,f.jt,f.iD,f.Vi],styles:["tbody.collapse.in[_ngcontent-%COMP%] {\n  display: table-row-group;\n}\n\n\n.categories_outer[_ngcontent-%COMP%]    > ul[_ngcontent-%COMP%] {\n  padding-left: 0;\n  margin-bottom: 10px;\n}\n\n\n.categories_outer[_ngcontent-%COMP%]    > ul[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%] {\n  list-style-type: none;\n}\n\n\n.parent-item[_ngcontent-%COMP%] {\n  padding: 10px 15px;\n  background: #f8f9fe;\n  \n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n\n.parent-item[_ngcontent-%COMP%]    > span[_ngcontent-%COMP%]{\n  cursor: pointer;\n  font-weight: 600;\n}\n\n\n.child-item[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\n  padding-left: 15px;\n}\n\n\n.child-item[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .parent-item[_ngcontent-%COMP%] {\n  background: #fff;\n}\n\n\n.parent-item[_ngcontent-%COMP%]    > span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  width: 20px;\n}"],data:{animation:[(0,m.X$)("collapse",[(0,m.SB)("open",(0,m.oB)({height:"*",opacity:1,display:"block"})),(0,m.SB)("closed",(0,m.oB)({height:"0px",opacity:0,display:"none"})),(0,m.eR)("open <=> closed",(0,m.jt)(200))])]}}),t}(),L=c(48318),h=function(){function t(n){this.categoriesService=n}return t.prototype.resolve=function(n,o){var r=this,i=n.params.id;return new L.y(function(s){return r.categoriesService.getCategoryDetails(i).subscribe({next:function(a){s.next({category:a.response,catId:i}),s.complete()}.bind(r),error:function(a){s.complete()}.bind(r)})})},t.\u0275fac=function(o){return new(o||t)(e.LFG(p.G))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t}(),Q=function(){return function(n){n&&(this.id=n.id,this.name=n.name,this.parent_id=n.parent_id,this.parent_name=n.parent_name,this.status=n.status,this.created_at=n.created_at,this.updated_at=n.updated_at)}}();function I(t,n){1&t&&(e.TgZ(0,"small",27),e._uU(1," Please enter category name "),e.qZA())}var D=[{path:"",component:Y,runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"add",component:A},{path:"edit/:id",resolve:{data:h},component:function(){function t(n,o,r,i){var s=this;this.fb=n,this.route=o,this.categoriesService=r,this.toastrService=i,this.updateCategoryForm=this.fb.group({name:["",g.kI.required],parent_id:["null"]}),this.submitted=!1,this.onSubmit=function(){s.submitted=!0,s.updateCategoryForm.invalid||s.categoriesService.updateCategory(s.catId,{name:s.updateCategoryForm.value.name,parent_id:s.updateCategoryForm.value.parent_id.data}).subscribe({next:function(d){s.toastrService.success("Category updated successfully"),s.submitted=!1}.bind(s),error:function(d){s.toastrService.error(d().message||"Something went wrong")}.bind(s)})}}return t.prototype.ngOnInit=function(){var n=this;this.categoriesSubscription=this.categoriesService.modifiedCategoryDropdownList$.subscribe(function(o){n.categories=o}),this.route.data.subscribe(function(o){n.category=new Q(o.data.category),n.catId=o.data.catId,n.updateCategoryForm.patchValue({name:n.category.name,parent_id:{data:n.category.parent_id,label:n.category.parent_name}})})},t.\u0275fac=function(o){return new(o||t)(e.Y36(g.qu),e.Y36(l.gz),e.Y36(p.G),e.Y36(v._W))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-edit-category"]],decls:35,vars:3,consts:[[1,"header","bg-gradient-dark","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"row"],[1,"container-fluid","mt--7"],[1,"row","justify-content-center"],[1,"col-xl-6"],[1,"card","bg-secondary","shadow"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-8"],[1,"mb-0"],["routerLink","/categories",1,"btn","btn-sm"],[1,"fa","fa-arrow-left"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"px-lg-4"],[1,"col-lg-12"],[1,"form-group"],["for","name",1,"form-control-label"],[2,"color","red"],["id","name","placeholder","Category name","formControlName","name","autocomplete","name","maxlength","50",1,"form-control","form-control-alternative"],["class","form-text text-danger form-error",4,"ngIf"],["for","category",1,"form-control-label"],["formControlName","parent_id","placeholder","---",3,"options"],[1,"text-center"],["type","submit",1,"btn","btn-primary","my-4"],[1,"form-text","text-danger","form-error"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"div",3),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.TgZ(8,"div",8),e.TgZ(9,"div",9),e.TgZ(10,"div",10),e.TgZ(11,"h3",11),e.TgZ(12,"a",12),e._UZ(13,"i",13),e.qZA(),e._uU(14,"\xa0 Edit Category "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",14),e.TgZ(16,"form",15),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(17,"div",16),e.TgZ(18,"div",3),e.TgZ(19,"div",17),e.TgZ(20,"div",18),e.TgZ(21,"label",19),e._uU(22," Category name "),e.TgZ(23,"sup",20),e._uU(24,"*"),e.qZA(),e.qZA(),e._UZ(25,"input",21),e.YNc(26,I,2,0,"small",22),e.qZA(),e.qZA(),e.TgZ(27,"div",17),e.TgZ(28,"div",18),e.TgZ(29,"label",23),e._uU(30," Parent category "),e.qZA(),e._UZ(31,"p-treeSelect",24),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"div",25),e.TgZ(33,"button",26),e._uU(34," Update category "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(16),e.Q6J("formGroup",r.updateCategoryForm),e.xp6(10),e.Q6J("ngIf",r.updateCategoryForm.get("name").hasError("required")&&(r.updateCategoryForm.get("name").dirty||r.updateCategoryForm.get("name").touched||r.submitted)),e.xp6(5),e.Q6J("options",r.categories))},directives:[l.yS,g._Y,g.JL,g.sg,g.Fj,g.JJ,g.u,g.nD,u.O5,Z.mP],styles:["","[_nghost-%COMP%]     .p-treeselect {\n      width:100%;\n      display: inline-flex;\n  }\n  [_nghost-%COMP%]     .p-treeselect:hover {\n      border-color:none;\n  }"]}),t}(),runGuardsAndResolvers:"paramsOrQueryParamsChange"}],R=function(){function t(){}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.Bz.forChild(D)],l.Bz]}),t}(),B=c(44218),j=c(22002),E=c(42101),G=c(46726),k=c(58203),$=function(){function t(){}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[h,B.v],imports:[[j.m,E.K,g.UX,R,g.u5,G.hJ,k.Q,Z.o6]]}),t}()}}]);