"use strict";(self.webpackChunkmyshops_admin=self.webpackChunkmyshops_admin||[]).push([[981],{34981:function(Pt,C,u){u.r(C),u.d(C,{ProductsModule:function(){return Tt}});var J=u(22002),k=u(42101),x=u(48318),h=u(96195),t=u(90189),w=function(){function n(e){this.productsService=e}return n.prototype.resolve=function(e,r){var o=this,i=e.params.id;return new x.y(function(d){return o.productsService.getProductDetails(i).subscribe({next:function(s){d.next({product:s.response,productId:i}),d.complete()}.bind(o),error:function(s){d.complete()}.bind(o)})})},n.\u0275fac=function(r){return new(r||n)(t.LFG(h.s))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n}(),U=u(57994),D=u(529),l=u(11462),y=u(3277),Y=function(){return function(e){e&&(this.id=e.id,this.name=e.name,this.short_description="null"!=e.short_description?e.short_description:"",this.long_description="null"!=e.long_description?e.long_description:"",this.quantity="null"!=e.quantity?e.quantity:"",this.category=e.category,this.price="null"!=e.price?e.price:"",this.availability=e.availability,this.options=e.options,this.dimensions="null"!=e.dimensions?e.dimensions:"",this.care_instructions="null"!=e.care_instructions?e.care_instructions:"",this.material="null"!=e.material?e.material:"",this.category_name=e.category_name,this.images_url=e.images_url,this.categories=e.categories)}}(),Z=u(25201),b=u(3492),_=u(61116);function Q(n,e){if(1&n){var r=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(r);var i=t.oxw().index;return t.oxw().removeOption(i)}),t._uU(1,"Remove"),t.qZA()}}function E(n,e){1&n&&(t.TgZ(0,"small",19),t._uU(1,"This field is required"),t.qZA())}function L(n,e){if(1&n&&(t.TgZ(0,"div"),t.TgZ(1,"div",12),t.TgZ(2,"div",13),t.TgZ(3,"label",14),t._uU(4),t.qZA(),t.YNc(5,Q,2,0,"button",15),t.qZA(),t._UZ(6,"input",16),t.YNc(7,E,2,0,"small",17),t.qZA(),t.qZA()),2&n){var r=e.$implicit,o=e.index,i=t.oxw();t.xp6(1),t.Q6J("formGroupName",o),t.xp6(3),t.hij("Option",o+1,""),t.xp6(1),t.Q6J("ngIf",o>0),t.xp6(2),t.Q6J("ngIf",r.get("option").hasError("required")&&(i.submitted||r.get("option").touched||r.get("option").dirty))}}var S=function(){function n(e,r,o,i){this.modal=e,this.fb=r,this.productsService=o,this.toastrService=i,this.option_group_id=0,this.optionGroupForm=this.fb.group({options:this.fb.array([this.newOption()])}),this.submitted=!1}return n.prototype.ngOnInit=function(){},Object.defineProperty(n.prototype,"options",{get:function(){return this.optionGroupForm.get("options")},enumerable:!1,configurable:!0}),n.prototype.newOption=function(){return this.fb.group({option:["",l.kI.required]})},n.prototype.addOptions=function(){this.options.push(this.newOption())},n.prototype.removeOption=function(e){this.options.removeAt(e)},n.prototype.onSubmit=function(){var e=this;if(this.submitted=!0,!this.optionGroupForm.invalid){var r={option_group_id:this.option_group_id,options_name:this.optionGroupForm.value.options.map(function(o){return o.option})};this.productsService.addOptions(r).subscribe({next:function(o){e.submitted=!1,e.toastrService.success("New options added successfully"),e.modal.close()},error:function(o){console.error(o().message),e.toastrService.error(o().message)}})}},n.\u0275fac=function(r){return new(r||n)(t.Y36(Z.Kz),t.Y36(l.qu),t.Y36(h.s),t.Y36(b._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-options"]],inputs:{option_group_id:"option_group_id"},decls:17,vars:2,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"formGroup","submit"],[1,"modal-body"],[1,"form-group"],["formArrayName","options"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary","btn-sm","mt-3",3,"click"],[1,"modal-footer"],["type","submit",1,"btn","btn-outline-dark"],[3,"formGroupName"],[1,"d-flex","justify-content-between","mt-3","mb-1"],["for","option"],["class","btn btn-outline-danger btn-sm",3,"click",4,"ngIf"],["placeholder","option","formControlName","option",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"text-danger"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0),t.TgZ(1,"h4",1),t._uU(2,"Profile update"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return o.modal.dismiss("Cross click")}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"form",4),t.NdJ("submit",function(){return o.onSubmit()}),t.TgZ(7,"div",5),t.TgZ(8,"div",6),t.TgZ(9,"div",7),t.YNc(10,L,8,4,"div",8),t.TgZ(11,"div"),t.TgZ(12,"button",9),t.NdJ("click",function(){return o.addOptions()}),t._uU(13,"Add"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",10),t.TgZ(15,"button",11),t._uU(16,"Save"),t.qZA(),t.qZA(),t.qZA()),2&r&&(t.xp6(6),t.Q6J("formGroup",o.optionGroupForm),t.xp6(4),t.Q6J("ngForOf",o.options.controls))},directives:[l._Y,l.JL,l.sg,l.CE,_.sg,l.x0,_.O5,l.Fj,l.JJ,l.u],styles:[""]}),n}(),v=u(85424),T=u(68020),O=u(83745),P=u(29937),q=function(){return q=Object.assign||function(n){for(var e,r=1,o=arguments.length;r<o;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},q.apply(this,arguments)},F=function(n,e){for(var r=0,o=e.length,i=n.length;r<o;r++,i++)n[i]=e[r];return n},R=["imageInputRef"];function G(n,e){1&n&&(t.TgZ(0,"small",54),t._uU(1," Please enter product name "),t.qZA())}function j(n,e){1&n&&(t.TgZ(0,"small",54),t._uU(1," Please select category "),t.qZA())}function H(n,e){if(1&n){var r=t.EpF();t.ynx(0),t.TgZ(1,"div",17),t.TgZ(2,"div",18),t.TgZ(3,"label",55),t._uU(4),t.TgZ(5,"button",56),t.NdJ("click",function(){var a=t.CHM(r).$implicit;return t.oxw().open(a)}),t._uU(6,"Add "),t._UZ(7,"i",57),t.qZA(),t.qZA(),t.TgZ(8,"ng-multiselect-dropdown",58),t.NdJ("onSelect",function(s){var c=t.CHM(r).$implicit;return t.oxw().onItemSelect(s,c.id)})("onDeSelect",function(s){var c=t.CHM(r).$implicit;return t.oxw().onDeItemSelect(s,c.id)}),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&n){var o=e.$implicit,i=t.oxw();t.xp6(4),t.hij(" Product ",o.group_name," "),t.xp6(4),t.Q6J("placeholder","Select "+o.group_name)("settings",i.dropdownSettings)("formControlName",null==o?null:o.group_name)("data",o.options)}}function $(n,e){if(1&n){var r=t.EpF();t.TgZ(0,"li",59),t._UZ(1,"img",60),t.TgZ(2,"i",61),t.NdJ("click",function(){var a=t.CHM(r).index;return t.oxw().deleteImage(a)}),t.qZA(),t.qZA()}if(2&n){var o=e.$implicit,i=t.oxw();t.xp6(1),t.Q6J("src",i.serverUrl+o.url,t.LSH)}}function z(n,e){if(1&n){var r=t.EpF();t.TgZ(0,"li",59),t._UZ(1,"img",60),t.TgZ(2,"i",61),t.NdJ("click",function(){var s=t.CHM(r).index;return t.oxw().removeImage(s)}),t.qZA(),t.qZA()}if(2&n){var o=e.$implicit;t.xp6(1),t.Q6J("src",o,t.LSH)}}function B(n,e){if(1&n){var r=t.EpF();t.TgZ(0,"li",62),t.TgZ(1,"input",63,64),t.NdJ("change",function(i){return t.CHM(r),t.oxw().selectFiles(i)}),t.qZA(),t.qZA()}}var V=function(){function n(e,r,o,i,d,s,a){var c=this;this.fb=e,this.route=r,this.router=o,this.productService=i,this.categoriesService=d,this.toastrService=s,this.modalService=a,this.updateProductForm=this.fb.group({name:["",l.kI.required],short_description:[""],long_description:[""],quantity:[""],price:[""],category:["",l.kI.required],availability:["1"],dimensions:[""],care_instructions:[""],material:[""],images:this.fb.array([])}),this.submitted=!1,this.images=[],this.previews=[],this.serverUrl=D.N.serverUrl,this.preImage=[],this.optionsValue={},this.optionArr=[],this.dynamincControls=[],this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",enableCheckAll:!1,allowSearchFilter:!0},this.deleteImages=[],this.selectedCategories=[],this.getSelectedCategories=function(p,m){for(var g=F([],p);g.length>0;){var f=g.pop();f.data!==m?f.children.length>0&&g.push.apply(g,f.children):c.selectedCategories.push(f)}},this.onSubmit=function(){if(c.submitted=!0,!c.updateProductForm.invalid){var p=new FormData;if(c.images)for(var m=0;m<c.images.length;m++)p.append("images",c.images[m]);else p.append("images",null);for(var g in p.append("images_url",JSON.stringify(c.deleteImages)),p.append("options",JSON.stringify(c.optionArr)),c.updateProductForm.value.category.forEach(function(f){p.append("category[]",f.data)}),c.updateProductForm.value)"image"!=g&&"options"!=g&&!c.dynamincControls.includes(g)&&"category"!=g&&p.append(g,c.updateProductForm.value[g]);c.productService.updateProduct(c.productId,p).subscribe({next:function(f){c.toastrService.success("Product updated successfully"),c.submitted=!1,c.router.navigateByUrl("/products")}.bind(c),error:function(f){c.toastrService.error(f().message||"Something went wrong")}.bind(c)})}}}return n.prototype.ngOnInit=function(){var e=this;this.productService.options$.subscribe(function(r){e.options=F([],r)}),this.categoriesService.modifiedCategoryDropdownList$.subscribe(function(r){e.categories=r}),this.route.data.subscribe(function(r){e.product=new Y(r.data.product),e.productId=r.data.productId,e.preImage=e.product.images_url,e.options.forEach(function(o){""+o.group_name in e.optionsValue||(e.optionsValue[""+o.group_name]=[],e.updateProductForm.addControl(""+o.group_name,new l.NI("")),e.dynamincControls.push(""+o.group_name))}),e.product.options.forEach(function(o,i){var d={id:o.option_id,name:o.option_name};e.optionArr.push({option_id:o.option_id,option_group_id:o.option_group_id,option_price_increment:0});var s=Object.values(e.optionsValue[""+o.option_group_name]);s.push(d),e.optionsValue[""+o.option_group_name]=s}),e.product.categories.forEach(function(o){e.getSelectedCategories(e.categories,o.category_id)}),e.updateProductForm.patchValue(q({name:e.product.name,short_description:e.product.short_description,long_description:e.product.long_description,quantity:e.product.quantity,price:e.product.price,category:e.selectedCategories,availability:e.product.availability.toString(),size:e.optionsValue.size,dimensions:e.product.dimensions,care_instructions:e.product.care_instructions,material:e.product.material},e.optionsValue))})},n.prototype.open=function(e){this.modalService.open(S).componentInstance.option_group_id=e.id},n.prototype.onItemSelect=function(e,r){this.optionArr.push({option_id:e.id,option_group_id:r,option_price_increment:0})},n.prototype.onDeItemSelect=function(e){var r=this.optionArr.findIndex(function(o){return e.id==o.option_id});-1!=r&&this.optionArr.splice(r,1)},n.prototype.selectFiles=function(e){var r;if(this.selectedFiles=e.target.files,this.images.length)for(var o=0;o<e.target.files.length;o++)this.images.find(this.findImage(e.target.files[o]))||this.images.push(e.target.files[o]);else(r=this.images).push.apply(r,e.target.files);var i=this.images.length+this.preImage.length;this.previews=[],i<6||this.images.splice(5,i-6),this.uploadFiles(),this.imageInputRef.nativeElement.value=null},n.prototype.uploadFiles=function(){var e=this;if(this.images&&this.images[0])for(var r=this.images.length,o=0;o<r;o++){var i=new FileReader;i.onload=function(d){e.previews.push(d.target.result)},i.readAsDataURL(this.images[o])}},n.prototype.findImage=function(e){return function(r){return r.name==e.name}},n.prototype.removeImage=function(e){this.images.splice(e,1),this.previews.splice(e,1)},n.prototype.deleteImage=function(e){this.deleteImages.push(this.preImage[e]),this.preImage.splice(e,1)},n.prototype.navigateBack=function(){window.history.back()},n.\u0275fac=function(r){return new(r||n)(t.Y36(l.qu),t.Y36(v.gz),t.Y36(v.F0),t.Y36(h.s),t.Y36(y.G),t.Y36(b._W),t.Y36(Z.FF))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-products"]],viewQuery:function(r,o){var i;(1&r&&t.Gf(R,5),2&r)&&(t.iGM(i=t.CRH())&&(o.imageInputRef=i.first))},decls:103,vars:9,consts:[[1,"header","bg-gradient-dark","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"row"],[1,"container-fluid","mt--7"],[1,"row","justify-content-center"],[1,"col-xl-9"],[1,"card","bg-secondary","shadow"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-8"],[1,"mb-0"],[1,"btn","btn-sm",3,"click"],[1,"fa","fa-arrow-left"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"px-lg-4"],[1,"col-lg-6"],[1,"form-group"],["for","name",1,"form-control-label"],[2,"color","red"],["id","name","placeholder","Product name","formControlName","name","autocomplete","name","maxlength","1000",1,"form-control","form-control-alternative"],["class","form-text text-danger form-error",4,"ngIf"],[1,"form-group","category__cnt"],["for","category",1,"form-control-label"],["formControlName","category","selectionMode","multiselect","placeholder","Select category",3,"options","metaKeySelection"],["for","price",1,"form-control-label"],["id","price","type","text","placeholder","Price","formControlName","price","maxlength","50","appOnlyNumber","","decimal","true",1,"form-control","form-control-alternative"],["for","quantity",1,"form-control-label"],["type","text","id","quantity","placeholder","Product quantity","formControlName","quantity","maxlength","50","appOnlyNumber","",1,"form-control","form-control-alternative"],[4,"ngFor","ngForOf"],["for","short_description",1,"form-control-label"],["id","short_description","placeholder","Product short description","formControlName","short_description","rows","5",1,"form-control","form-control-alternative"],["for","long_description",1,"form-control-label"],["id","long_description","placeholder","Product long description","formControlName","long_description","rows","5",1,"form-control","form-control-alternative"],["for","dimensions",1,"form-control-label"],["id","dimensions","rows","5","placeholder","Product dimensions","formControlName","dimensions",1,"form-control","form-control-alternative"],["for","care_instructions",1,"form-control-label"],["id","care_instructions","rows","5","placeholder","Product care instructions","formControlName","care_instructions",1,"form-control","form-control-alternative"],[1,"col-lg-12"],["for","material",1,"form-control-label"],["id","material","rows","5","placeholder","Product material","formControlName","material",1,"form-control","form-control-alternative"],["for","image",1,"form-control-label"],[1,"list-inline","preview_wrapper"],["class","preview_item list-inline-item",4,"ngFor","ngForOf"],["class","img-insert",4,"ngIf"],[1,"form"],["for","availability",1,"form-control-label"],[1,"form-check-inline"],["for","radio1",1,"form-check-label"],["type","radio","id","availability","formControlName","availability","value","1",1,"form-check-input"],["type","radio","id","availability","placeholder","availability","value","0","formControlName","availability",1,"form-check-input"],[1,"text-center"],["type","submit",1,"btn","btn-primary","my-4"],[1,"form-text","text-danger","form-error"],["for","size",1,"form-control-label","add-option"],["type","button",1,"btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[3,"placeholder","settings","formControlName","data","onSelect","onDeSelect"],[1,"preview_item","list-inline-item"],[1,"preview",3,"src"],[1,"fa","fa-solid","fa-times","preview_delete",3,"click"],[1,"img-insert"],["type","file","accept","image/*","multiple","",1,"form-control","form-control-alternative",3,"change"],["imageInputRef",""]],template:function(r,o){1&r&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"div",3),t.qZA(),t.qZA(),t.qZA(),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"div",7),t.TgZ(8,"div",8),t.TgZ(9,"div",9),t.TgZ(10,"div",10),t.TgZ(11,"h3",11),t.TgZ(12,"a",12),t.NdJ("click",function(){return o.navigateBack()}),t._UZ(13,"i",13),t.qZA(),t._uU(14,"\xa0 Edit Product "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",14),t.TgZ(16,"form",15),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(17,"div",16),t.TgZ(18,"div",3),t.TgZ(19,"div",17),t.TgZ(20,"div",18),t.TgZ(21,"label",19),t._uU(22," Product name"),t.TgZ(23,"sup",20),t._uU(24,"*"),t.qZA(),t.qZA(),t._UZ(25,"input",21),t.YNc(26,G,2,0,"small",22),t.qZA(),t.qZA(),t.TgZ(27,"div",17),t.TgZ(28,"div",23),t.TgZ(29,"label",24),t._uU(30," Category"),t.TgZ(31,"sup",20),t._uU(32,"*"),t.qZA(),t.qZA(),t._UZ(33,"p-treeSelect",25),t.YNc(34,j,2,0,"small",22),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"div",3),t.TgZ(36,"div",17),t.TgZ(37,"div",18),t.TgZ(38,"label",26),t._uU(39," Price "),t.qZA(),t._UZ(40,"input",27),t.qZA(),t.qZA(),t.TgZ(41,"div",17),t.TgZ(42,"div",18),t.TgZ(43,"label",28),t._uU(44," Product quantity "),t.qZA(),t._UZ(45,"input",29),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"div",3),t.YNc(47,H,9,5,"ng-container",30),t.qZA(),t.TgZ(48,"div",3),t.TgZ(49,"div",17),t.TgZ(50,"div",18),t.TgZ(51,"label",31),t._uU(52," Product short description "),t.qZA(),t._UZ(53,"textarea",32),t.qZA(),t.qZA(),t.TgZ(54,"div",17),t.TgZ(55,"div",18),t.TgZ(56,"label",33),t._uU(57," Product long description "),t.qZA(),t._UZ(58,"textarea",34),t.qZA(),t.qZA(),t.qZA(),t.TgZ(59,"div",3),t.TgZ(60,"div",17),t.TgZ(61,"div",18),t.TgZ(62,"label",35),t._uU(63," Product dimensions "),t.qZA(),t._UZ(64,"textarea",36),t.qZA(),t.qZA(),t.TgZ(65,"div",17),t.TgZ(66,"div",18),t.TgZ(67,"label",37),t._uU(68," Product care instructions "),t.qZA(),t._UZ(69,"textarea",38),t.qZA(),t.qZA(),t.qZA(),t.TgZ(70,"div",3),t.TgZ(71,"div",39),t.TgZ(72,"div",18),t.TgZ(73,"label",40),t._uU(74," Product material "),t.qZA(),t._UZ(75,"textarea",41),t.qZA(),t.qZA(),t.qZA(),t.TgZ(76,"div",3),t.TgZ(77,"div",39),t.TgZ(78,"label",42),t._uU(79," Product image "),t.qZA(),t.qZA(),t.TgZ(80,"div",39),t.TgZ(81,"ul",43),t.YNc(82,$,3,1,"li",44),t.YNc(83,z,3,1,"li",44),t.YNc(84,B,3,0,"li",45),t.qZA(),t.qZA(),t.qZA(),t.TgZ(85,"div",3),t.TgZ(86,"div",39),t.TgZ(87,"div",46),t.TgZ(88,"label",47),t._uU(89," Availability"),t.TgZ(90,"sup",20),t._uU(91,"*"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(92,"div",48),t.TgZ(93,"label",49),t._UZ(94,"input",50),t._uU(95,"Yes "),t.qZA(),t.qZA(),t.TgZ(96,"div",48),t.TgZ(97,"label",49),t._UZ(98,"input",51),t._uU(99,"No "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(100,"div",52),t.TgZ(101,"button",53),t._uU(102," Update product "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&r&&(t.xp6(16),t.Q6J("formGroup",o.updateProductForm),t.xp6(10),t.Q6J("ngIf",o.updateProductForm.get("name").hasError("required")&&(o.updateProductForm.get("name").dirty||o.updateProductForm.get("name").touched||o.submitted)),t.xp6(7),t.Q6J("options",o.categories)("metaKeySelection",!1),t.xp6(1),t.Q6J("ngIf",o.updateProductForm.get("category").hasError("required")&&(o.updateProductForm.get("category").dirty||o.updateProductForm.get("category").touched||o.submitted)),t.xp6(13),t.Q6J("ngForOf",o.options),t.xp6(35),t.Q6J("ngForOf",o.preImage),t.xp6(1),t.Q6J("ngForOf",o.previews),t.xp6(1),t.Q6J("ngIf",o.preImage.length+o.images.length<6))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.nD,_.O5,T.mP,O.p,_.sg,l._,P.OP],styles:['.preview[_ngcontent-%COMP%]{\n  width: 100px;\n}\n.preview_wrapper[_ngcontent-%COMP%]{\n  display: flex;\n  align-items: flex-start;\n  flex-wrap: wrap;\n  padding-top: 5px;\n}\n.preview_wrapper[_ngcontent-%COMP%]   .preview_item[_ngcontent-%COMP%]{\n  margin-bottom: 15px;\n  margin-right: 15px;\n  width: 150px;\n  height: 150px;\n  position: relative;\n}\n.preview_wrapper[_ngcontent-%COMP%]   .preview_item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{\n  border-radius: 5px;\n  width: 100%;\n  height: 100%;\n  -o-object-fit: cover;\n     object-fit: cover;\n}\n.preview_item[_ngcontent-%COMP%]   .preview_delete[_ngcontent-%COMP%] {\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  background: #fff;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  opacity: 0.7;\n}\n.preview_item[_ngcontent-%COMP%]   .preview_delete[_ngcontent-%COMP%]:hover{\n  cursor: pointer;\n  opacity: 1;\n}\n\n.card-body[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%] {\n  border-radius: 5px;\n}\n.preview_wrapper[_ngcontent-%COMP%]   li.img-insert[_ngcontent-%COMP%] {\n  position: relative;\n  background: #212121;\n  border-radius: 5px;\n  height: 148px;\n  width: 200px;\n  cursor: pointer;\n}\n\n\nli.img-insert[_ngcontent-%COMP%]:after {\n  content: "\\2b";\n    position: absolute;\n    top: 33%;\n    left: 50%;\n    transform: translate(-50%);\n    color: #fff;\n    font-size: 32px;\n\n    z-index: 0;\n}\n.img-insert[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{\n  opacity: 0;\n  height: 165px;\n\n}']}),n}(),K=u(18725),X=["imageInputRef"];function tt(n,e){1&n&&(t.TgZ(0,"small",54),t._uU(1," Please enter product name "),t.qZA())}function et(n,e){1&n&&(t.TgZ(0,"small",54),t._uU(1," Please select category "),t.qZA())}function ot(n,e){if(1&n){var r=t.EpF();t.ynx(0),t.TgZ(1,"div",17),t.TgZ(2,"div",18),t.TgZ(3,"label",55),t._uU(4),t.TgZ(5,"button",56),t.NdJ("click",function(){var a=t.CHM(r).$implicit;return t.oxw().open(a)}),t._uU(6," Add "),t._UZ(7,"i",57),t.qZA(),t.qZA(),t.TgZ(8,"ng-multiselect-dropdown",58),t.NdJ("onSelect",function(s){var c=t.CHM(r).$implicit;return t.oxw().onItemSelect(s,c.id)})("onDeSelect",function(s){var c=t.CHM(r).$implicit;return t.oxw().onDeItemSelect(s,c.id)}),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&n){var o=e.$implicit,i=t.oxw();t.xp6(4),t.hij(" Product ",o.group_name," "),t.xp6(4),t.Q6J("placeholder","Select "+o.group_name)("settings",i.dropdownSettings)("data",o.options)}}function nt(n,e){if(1&n){var r=t.EpF();t.TgZ(0,"li",59),t._UZ(1,"img",60),t.TgZ(2,"i",61),t.NdJ("click",function(){var s=t.CHM(r).index;return t.oxw().removeImage(s)}),t.qZA(),t.qZA()}if(2&n){var o=e.$implicit;t.xp6(1),t.Q6J("src",o,t.LSH)}}function rt(n,e){if(1&n){var r=t.EpF();t.TgZ(0,"li",62),t.TgZ(1,"input",63,64),t.NdJ("change",function(i){return t.CHM(r),t.oxw().selectFiles(i)}),t.qZA(),t.qZA()}}var it=function(){function n(e,r,o,i,d,s){var a=this;this.fb=e,this.productService=r,this.categoriesService=o,this.toastrService=i,this.modalService=d,this.router=s,this.addProductForm=this.fb.group({name:["",l.kI.required],short_description:[""],long_description:[""],quantity:[""],price:["0"],category:["",l.kI.required],availability:["1"],options:["[]"],dimensions:[""],care_instructions:[""],material:[""],images:this.fb.array([])}),this.submitted=!1,this.images=[],this.previews=[],this.optionArr=[],this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",enableCheckAll:!1,allowSearchFilter:!0},this.onSubmit=function(){if(a.submitted=!0,!a.addProductForm.invalid){var c=new FormData;if(a.images)for(var p=0;p<a.images.length;p++)c.append("images",a.images[p]);else c.append("images",null);for(var m in""==a.addProductForm.value.price&&(a.addProductForm.value.price="0"),""==a.addProductForm.value.quantity&&(a.addProductForm.value.quantity="0"),c.append("options",JSON.stringify(a.optionArr)),a.addProductForm.value.category.forEach(function(g){c.append("category[]",g.data)}),a.addProductForm.value)"images"!=m&&"options"!=m&&"category"!=m&&c.append(m,a.addProductForm.value[m]);a.productService.addProduct(c).subscribe({next:function(g){a.toastrService.success("Product added successfully"),a.submitted=!1,a.addProductForm.reset(),a.addProductForm.patchValue({category_id:""}),a.previews=[],a.selectedFiles=null,a.router.navigateByUrl("/products")}.bind(a),error:function(g){a.toastrService.error(g().message||"Something went wrong")}.bind(a)})}}}return n.prototype.ngOnInit=function(){var e=this;this.categoriesService.modifiedCategoryDropdownList$.subscribe(function(r){e.categories=r}),this.productService.options$.subscribe(function(r){e.options=function(n,e){for(var r=0,o=e.length,i=n.length;r<o;r++,i++)n[i]=e[r];return n}([],r)})},n.prototype.open=function(e){this.modalService.open(S).componentInstance.option_group_id=e.id},n.prototype.onItemSelect=function(e,r){this.optionArr.push({option_id:e.id,option_group_id:r,option_price_increment:0})},n.prototype.onDeItemSelect=function(e,r){var o=this.optionArr.findIndex(function(i){return e.id==i.option_id});o&&this.optionArr.splice(o,1)},n.prototype.selectFiles=function(e){var r;if(this.selectedFiles=e.target.files,this.images.length)for(var o=0;o<e.target.files.length;o++)this.images.find(this.findImage(e.target.files[o]))||this.images.push(e.target.files[o]);else(r=this.images).push.apply(r,e.target.files);var i=this.images.length;this.previews=[],i<6||this.images.splice(5,this.images.length-6),this.uploadFiles(),this.imageInputRef.nativeElement.value=null},n.prototype.uploadFiles=function(){var e=this;if(this.images&&this.images[0])for(var r=this.images.length,o=0;o<r;o++){var i=new FileReader;i.onload=function(d){e.previews.push(d.target.result)},i.readAsDataURL(this.images[o])}},n.prototype.findImage=function(e){return function(r){return r.name==e.name}},n.prototype.removeImage=function(e){this.images.splice(e,1),this.previews.splice(e,1)},n.prototype.navigateBack=function(){window.history.back()},Object.defineProperty(n.prototype,"properties",{get:function(){return this.addProductForm.controls.properties},enumerable:!1,configurable:!0}),n.prototype.addProperty=function(){var e=this.fb.group({name:["",l.kI.required],value:["",l.kI.required]});this.properties.push(e)},n.prototype.deleteProperty=function(e){this.properties.removeAt(e)},n.\u0275fac=function(r){return new(r||n)(t.Y36(l.qu),t.Y36(h.s),t.Y36(y.G),t.Y36(b._W),t.Y36(Z.FF),t.Y36(v.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-products"]],viewQuery:function(r,o){var i;(1&r&&t.Gf(X,5),2&r)&&(t.iGM(i=t.CRH())&&(o.imageInputRef=i.first))},decls:102,vars:8,consts:[[1,"header","bg-gradient-dark","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"row"],[1,"container-fluid","mt--7"],[1,"row","justify-content-center"],[1,"col-xl-9"],[1,"card","bg-secondary","shadow"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-8"],[1,"mb-0"],[1,"btn","btn-sm",3,"click"],[1,"fa","fa-arrow-left"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"px-lg-4"],[1,"col-lg-6"],[1,"form-group"],["for","name",1,"form-control-label"],[2,"color","red"],["id","name","placeholder","Product name","formControlName","name","autocomplete","name","maxlength","1000",1,"form-control","form-control-alternative"],["class","form-text text-danger form-error",4,"ngIf"],[1,"form-group","category__cnt"],["for","category",1,"form-control-label"],["formControlName","category","selectionMode","multiple","placeholder","Select Category",3,"options","metaKeySelection"],["for","price",1,"form-control-label"],["id","price","type","text","placeholder","Price","formControlName","price","maxlength","50","appOnlyNumber","","decimal","true",1,"form-control","form-control-alternative"],["for","quantity",1,"form-control-label"],["type","number","id","quantity","placeholder","Product quantity","formControlName","quantity","maxlength","50","non-negative","",1,"form-control","form-control-alternative"],[4,"ngFor","ngForOf"],["for","short_description",1,"form-control-label"],["id","short_description","placeholder","Product short description","formControlName","short_description","rows","5",1,"form-control","form-control-alternative"],["for","long_description",1,"form-control-label"],["id","long_description","placeholder","Product long description","formControlName","long_description","rows","5",1,"form-control","form-control-alternative"],["for","dimensions",1,"form-control-label"],["id","dimensions","rows","5","placeholder","Product dimensions","formControlName","dimensions",1,"form-control","form-control-alternative"],["for","care_instructions",1,"form-control-label"],["id","care_instructions","rows","5","placeholder","Product care instructions","formControlName","care_instructions",1,"form-control","form-control-alternative"],[1,"col-lg-12"],["for","material",1,"form-control-label"],["id","material","placeholder","Product material","rows","5","formControlName","material",1,"form-control","form-control-alternative"],["for","image",1,"form-control-label"],[1,"list-inline","preview_wrapper"],["class","preview_item list-inline-item",4,"ngFor","ngForOf"],["class","img-insert",4,"ngIf"],[1,"form"],["for","availability",1,"form-control-label"],[1,"form-check-inline"],["for","radio1",1,"form-check-label"],["type","radio","id","availability","formControlName","availability","value","1",1,"form-check-input"],["type","radio","id","availability","placeholder","availability","value","0","formControlName","availability",1,"form-check-input"],[1,"text-center"],["type","submit",1,"btn","btn-primary","my-4"],[1,"form-text","text-danger","form-error"],["for","size",1,"form-control-label","add-option"],["type","button",1,"btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[3,"placeholder","settings","data","onSelect","onDeSelect"],[1,"preview_item","list-inline-item"],[1,"preview",3,"src"],[1,"fa","fa-solid","fa-times","preview_delete",3,"click"],[1,"img-insert"],["type","file","accept","image/*","multiple","",1,"form-control","form-control-alternative",3,"change"],["imageInputRef",""]],template:function(r,o){if(1&r&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"div",3),t.qZA(),t.qZA(),t.qZA(),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"div",7),t.TgZ(8,"div",8),t.TgZ(9,"div",9),t.TgZ(10,"div",10),t.TgZ(11,"h3",11),t.TgZ(12,"a",12),t.NdJ("click",function(){return o.navigateBack()}),t._UZ(13,"i",13),t.qZA(),t._uU(14,"\xa0 Add Product "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",14),t.TgZ(16,"form",15),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(17,"div",16),t.TgZ(18,"div",3),t.TgZ(19,"div",17),t.TgZ(20,"div",18),t.TgZ(21,"label",19),t._uU(22," Product name"),t.TgZ(23,"sup",20),t._uU(24,"*"),t.qZA(),t.qZA(),t._UZ(25,"input",21),t.YNc(26,tt,2,0,"small",22),t.qZA(),t.qZA(),t.TgZ(27,"div",17),t.TgZ(28,"div",23),t.TgZ(29,"label",24),t._uU(30," Category"),t.TgZ(31,"sup",20),t._uU(32,"*"),t.qZA(),t.qZA(),t._UZ(33,"p-treeSelect",25),t.YNc(34,et,2,0,"small",22),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"div",3),t.TgZ(36,"div",17),t.TgZ(37,"div",18),t.TgZ(38,"label",26),t._uU(39,"Price "),t.qZA(),t._UZ(40,"input",27),t.qZA(),t.qZA(),t.TgZ(41,"div",17),t.TgZ(42,"div",18),t.TgZ(43,"label",28),t._uU(44," Product quantity "),t.qZA(),t._UZ(45,"input",29),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"div",3),t.YNc(47,ot,9,4,"ng-container",30),t.qZA(),t.TgZ(48,"div",3),t.TgZ(49,"div",17),t.TgZ(50,"div",18),t.TgZ(51,"label",31),t._uU(52," Product short description "),t.qZA(),t._UZ(53,"textarea",32),t.qZA(),t.qZA(),t.TgZ(54,"div",17),t.TgZ(55,"div",18),t.TgZ(56,"label",33),t._uU(57," Product long description "),t.qZA(),t._UZ(58,"textarea",34),t.qZA(),t.qZA(),t.qZA(),t.TgZ(59,"div",3),t.TgZ(60,"div",17),t.TgZ(61,"div",18),t.TgZ(62,"label",35),t._uU(63," Product dimensions "),t.qZA(),t._UZ(64,"textarea",36),t.qZA(),t.qZA(),t.TgZ(65,"div",17),t.TgZ(66,"div",18),t.TgZ(67,"label",37),t._uU(68," Product care instructions "),t.qZA(),t._UZ(69,"textarea",38),t.qZA(),t.qZA(),t.qZA(),t.TgZ(70,"div",3),t.TgZ(71,"div",39),t.TgZ(72,"div",18),t.TgZ(73,"label",40),t._uU(74," Product material "),t.qZA(),t._UZ(75,"textarea",41),t.qZA(),t.qZA(),t.qZA(),t.TgZ(76,"div",3),t.TgZ(77,"div",39),t.TgZ(78,"label",42),t._uU(79," Product image "),t.qZA(),t.qZA(),t.TgZ(80,"div",39),t.TgZ(81,"ul",43),t.YNc(82,nt,3,1,"li",44),t.YNc(83,rt,3,0,"li",45),t.qZA(),t.qZA(),t.qZA(),t.TgZ(84,"div",3),t.TgZ(85,"div",39),t.TgZ(86,"div",46),t.TgZ(87,"label",47),t._uU(88," Availability"),t.TgZ(89,"sup",20),t._uU(90,"*"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(91,"div",48),t.TgZ(92,"label",49),t._UZ(93,"input",50),t._uU(94,"Yes "),t.qZA(),t.qZA(),t.TgZ(95,"div",48),t.TgZ(96,"label",49),t._UZ(97,"input",51),t._uU(98,"No "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(99,"div",52),t.TgZ(100,"button",53),t._uU(101," Add product "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&r){var i=void 0,d=void 0;t.xp6(16),t.Q6J("formGroup",o.addProductForm),t.xp6(10),t.Q6J("ngIf",(null==(i=o.addProductForm.get("name"))?null:i.hasError("required"))&&((null==(i=o.addProductForm.get("name"))?null:i.dirty)||(null==(i=o.addProductForm.get("name"))?null:i.touched)||o.submitted)),t.xp6(7),t.Q6J("options",o.categories)("metaKeySelection",!1),t.xp6(1),t.Q6J("ngIf",(null==(d=o.addProductForm.get("category"))?null:d.hasError("required"))&&((null==(d=o.addProductForm.get("category"))?null:d.dirty)||(null==(d=o.addProductForm.get("category"))?null:d.touched)||o.submitted)),t.xp6(13),t.Q6J("ngForOf",o.options),t.xp6(35),t.Q6J("ngForOf",o.previews),t.xp6(1),t.Q6J("ngIf",o.images.length<6)}},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.nD,_.O5,T.mP,O.p,l.wV,K.y,_.sg,l._,P.OP],styles:['.preview[_ngcontent-%COMP%]{\n  width: 100px;\n}\n.preview_wrapper[_ngcontent-%COMP%]{\n  display: flex;\n  align-items: flex-start;\n  flex-wrap: wrap;\n  padding-top: 5px;\n}\n.preview_wrapper[_ngcontent-%COMP%]   .preview_item[_ngcontent-%COMP%]{\n  margin-bottom: 15px;\n  margin-right: 15px;\n  width: 150px;\n  height: 150px;\n  position: relative;\n}\n.preview_wrapper[_ngcontent-%COMP%]   .preview_item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{\n  border-radius: 5px;\n  width: 100%;\n  height: 100%;\n  -o-object-fit: cover;\n     object-fit: cover;\n}\n.preview_item[_ngcontent-%COMP%]   .preview_delete[_ngcontent-%COMP%] {\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  background: #fff;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  opacity: 0.7;\n}\n.preview_item[_ngcontent-%COMP%]   .preview_delete[_ngcontent-%COMP%]:hover{\n  cursor: pointer;\n  opacity: 1;\n}\n\n.card-body[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%] {\n  border-radius: 5px;\n}\n.preview_wrapper[_ngcontent-%COMP%]   li.img-insert[_ngcontent-%COMP%] {\n  position: relative;\n  background: #212121;\n  border-radius: 5px;\n  height: 148px;\n  width: 200px;\n  cursor: pointer;\n}\n\n\nli.img-insert[_ngcontent-%COMP%]:after {\n  content: "\\2b";\n    position: absolute;\n    top: 33%;\n    left: 50%;\n    transform: translate(-50%);\n    color: #fff;\n    font-size: 32px;\n\n    z-index: 0;\n}\n.img-insert[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{\n  opacity: 0;\n  height: 165px;\n\n}']}),n}(),A=u(51703),at=u(59937),ct=u(90065),dt=u(75192),st=u(60407),N=function(n,e){for(var r=0,o=e.length,i=n.length;r<o;r++,i++)n[i]=e[r];return n};function lt(n,e){1&n&&(t.TgZ(0,"span"),t._uU(1,"$"),t.qZA())}function ut(n,e){1&n&&(t.TgZ(0,"span"),t._uU(1,"AUD"),t.qZA())}function pt(n,e){1&n&&(t.TgZ(0,"span",22),t._UZ(1,"i",23),t._uU(2," Yes "),t.qZA())}function gt(n,e){1&n&&(t.TgZ(0,"span",22),t._UZ(1,"i",31),t._uU(2," No "),t.qZA())}function mt(n,e){if(1&n){var r=t.EpF();t.TgZ(0,"tr",17),t.TgZ(1,"td"),t.TgZ(2,"div",18),t._UZ(3,"i",19),t.qZA(),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"titlecase"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t.YNc(14,lt,2,0,"span",20),t._uU(15),t.YNc(16,ut,2,0,"span",20),t.qZA(),t.TgZ(17,"td"),t.YNc(18,pt,3,0,"span",21),t.YNc(19,gt,3,0,"span",21),t.qZA(),t.TgZ(20,"td"),t.TgZ(21,"span",22),t._UZ(22,"i",23),t._uU(23," Active "),t.qZA(),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.ALo(26,"date"),t.qZA(),t.TgZ(27,"td",24),t.TgZ(28,"div",25),t.TgZ(29,"a",26),t._UZ(30,"i",27),t.qZA(),t.TgZ(31,"div",28),t.TgZ(32,"a",29),t.NdJ("click",function(){var a=t.CHM(r),c=a.$implicit,p=a.index;return t.oxw(2).deleteProduct(c.id,p)}),t._uU(33," Delete product "),t.qZA(),t.TgZ(34,"a",30),t._uU(35," Edit product "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){var o=e.$implicit,i=e.index,d=t.oxw(2);t.Q6J("cdkDragData",o),t.xp6(5),t.Oqu((d.currentPage-1)*d.perPage+(i+1)),t.xp6(2),t.Oqu(t.lcZ(8,13,o.name)),t.xp6(3),t.Oqu(o.category_name||"N/A"),t.xp6(2),t.Oqu(o.quantity||"N/A"),t.xp6(2),t.Q6J("ngIf",o.price),t.xp6(1),t.hij("",o.price||"N/A"," "),t.xp6(1),t.Q6J("ngIf",o.price),t.xp6(2),t.Q6J("ngIf",o.availability),t.xp6(1),t.Q6J("ngIf",!o.availability),t.xp6(6),t.Oqu(t.xi3(26,15,o.created_at,"dd/MM/yyyy")),t.xp6(3),t.Q6J("placement","left"),t.xp6(6),t.Q6J("routerLink","/products/edit/"+o.id)}}function ft(n,e){if(1&n&&(t.ynx(0),t.YNc(1,mt,36,18,"tr",16),t.BQk()),2&n){var r=t.oxw();t.xp6(1),t.Q6J("ngForOf",r.product)}}function _t(n,e){1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"th",32),t._uU(2,"No record found"),t.qZA(),t.qZA())}var vt=function(){function n(e,r,o,i,d,s){var a=this;this.route=e,this.router=r,this.productService=o,this.categoriesService=i,this.toastrService=d,this.modalService=s,this.totalProduct=[],this.product=[],this.currentPage=1,this.totalPage=1,this.perPage=10,this.category="",this.count=1,this.search="",this.categoryList=[],this.categoryChange=function(c){a.category=c.node,a.router.navigate([],{relativeTo:a.route,queryParams:{category:c.node.data},queryParamsHandling:"merge"})},this.onSearch=function(c){a.router.navigate([],{relativeTo:a.route,queryParams:{search:c,page:1},queryParamsHandling:"merge"})},this.onPageChange=function(c){a.currentPage=c,a.navigateRoute()},this.viewAll=function(){a.currentPage=1,a.perPage=99999999999,a.navigateRoute(a.perPage)},this.navigateRoute=function(c){void 0===c&&(c=10),a.router.navigate([],{relativeTo:a.route,queryParams:{page:a.currentPage,perPage:c}})},this.deleteProduct=function(c,p){var m=a.modalService.open(at.p,{centered:!0});m.componentInstance.data={title:"You are about to delete an product.",body:"This will delete the product permanently and will be revoked if has been assigned to any user.",confirmButtonText:"Delete product",cancelButtonText:"Cancel"},m.closed.subscribe(function(g){g&&a.productService.deleteProduct(c,p).subscribe({next:function(f){var M=a.product.findIndex(function(yt){return yt.id===c});M>-1&&a.product.splice(M,1),a.toastrService.success("Product deleted successfully")}.bind(a),error:function(f){a.toastrService.error(f.message)}.bind(a)})})}}return n.prototype.ngOnInit=function(){var e=this;this.productService.product$.subscribe(function(r){e.totalProduct=N([],r),e.currentPage=+e.productService.currentPage,e.perPage=e.productService.perPage,e.count=+e.productService.count,e.totalPage=Math.ceil(e.count/e.perPage)}),this.categoriesService.modifiedCategoryDropdownList$.subscribe(function(r){e.categoryList=N([{label:"All",data:"all",children:[]}],r)}),this.route.queryParams.subscribe(function(r){e.search=r.search||"",e.product=e.totalProduct.slice(),r.hasOwnProperty("category")&&r.category&&(e.category=e.categoryList.find(function(o){return o.data==r.category}))})},n.prototype.onDrop=function(e){var r=this,o=e.currentIndex,i=e.item.data.id,d=this.product.findIndex(function(a){return a.id===i});if(d!==o){if(d>o)for(var s=o;s<d;s++)this.product[s].product_order++;else for(s=d+1;s<=o;s++)this.product[s].product_order--;this.product[d].product_order=o+1,this.productService.updateRowOrder({id:i,newOrder:o+1}).subscribe(function(a){(0,A.bA)(r.product,e.previousIndex,e.currentIndex)})}},n.\u0275fac=function(r){return new(r||n)(t.Y36(v.gz),t.Y36(v.F0),t.Y36(h.s),t.Y36(y.G),t.Y36(b._W),t.Y36(Z.FF))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-products-list"]],decls:41,vars:8,consts:[[1,"row","align-items-end"],[1,"col-md-12","col-lg-9","order-1","order-lg-0"],[1,"col-lg-3","col-6","mb-2","mb-lg-0"],["for","",1,"text-dark"],["placeholder","Select category",3,"ngModel","options","ngModelChange","onNodeSelect"],["type","search","name","search","placeholder","Search","id","",1,"form-control",3,"value","search"],[1,"col-md-12","col-lg-3","text-right","order-0","order-lg-1","mb-3","mb-lg-0"],["routerLink","/products/add",1,"btn","btn-primary"],["title","products"],["type","button","additional","",1,"btn","btn-outline-secondary","mb-0",3,"click"],[1,"thead-light"],["scope","col"],["cdkDropList","",3,"cdkDropListData","cdkDropListDropped"],[4,"ngIf","ngIfElse"],["noProductExist",""],[3,"currentPage","totalPage","pageChange"],["cdkDrag","",3,"cdkDragData",4,"ngFor","ngForOf"],["cdkDrag","",3,"cdkDragData"],["cdkDragHandle","",1,"drag-handle"],[1,"fas","fa-arrows-alt"],[4,"ngIf"],["class","badge badge-dot mr-4",4,"ngIf"],[1,"badge","badge-dot","mr-4"],[1,"bg-success"],[1,"text-right","dropdown-fixed"],["ngbDropdown","",3,"placement"],["ngbDropdownToggle","",1,"btn","btn-sm","btn-icon-only","text-light"],[1,"fas","fa-ellipsis-v"],["ngbDropdownMenu","",1,"dropdown-menu-right","dropdown-menu-arrow"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],[1,"dropdown-item",3,"routerLink"],[1,"bg-danger"],["colspan","8",1,"no-record-found"]],template:function(r,o){if(1&r&&(t.TgZ(0,"app-page-header"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"div",0),t.TgZ(4,"div",2),t.TgZ(5,"label",3),t._uU(6,"Filter by category"),t.qZA(),t.TgZ(7,"p-treeSelect",4),t.NdJ("ngModelChange",function(s){return o.category=s})("onNodeSelect",function(s){return o.categoryChange(s)}),t.qZA(),t.qZA(),t.TgZ(8,"div",2),t.TgZ(9,"input",5),t.NdJ("search",function(s){return o.onSearch(s.target.value)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",6),t.TgZ(11,"a",7),t._uU(12," Add New Product "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"app-page-body",8),t.TgZ(14,"button",9),t.NdJ("click",function(){return o.viewAll()}),t._uU(15,"View all"),t.qZA(),t.TgZ(16,"thead",10),t.TgZ(17,"tr"),t._UZ(18,"th",11),t.TgZ(19,"th",11),t._uU(20,"#"),t.qZA(),t.TgZ(21,"th",11),t._uU(22,"Name"),t.qZA(),t.TgZ(23,"th",11),t._uU(24,"category"),t.qZA(),t.TgZ(25,"th",11),t._uU(26,"Qty"),t.qZA(),t.TgZ(27,"th",11),t._uU(28,"Price"),t.qZA(),t.TgZ(29,"th",11),t._uU(30,"Available"),t.qZA(),t.TgZ(31,"th",11),t._uU(32,"Status"),t.qZA(),t.TgZ(33,"th",11),t._uU(34,"Created at"),t.qZA(),t._UZ(35,"th",11),t.qZA(),t.qZA(),t.TgZ(36,"tbody",12),t.NdJ("cdkDropListDropped",function(s){return o.onDrop(s)}),t.YNc(37,ft,2,1,"ng-container",13),t.YNc(38,_t,3,0,"ng-template",null,14,t.W1O),t.qZA(),t.TgZ(40,"app-pagination",15),t.NdJ("pageChange",function(s){return o.onPageChange(s)}),t.qZA(),t.qZA()),2&r){var i=t.MAs(39);t.xp6(7),t.Q6J("ngModel",o.category)("options",o.categoryList),t.xp6(2),t.Q6J("value",o.search),t.xp6(27),t.Q6J("cdkDropListData",o.product),t.xp6(1),t.Q6J("ngIf",null==o.product?null:o.product.length)("ngIfElse",i),t.xp6(3),t.Q6J("currentPage",o.currentPage)("totalPage",o.totalPage)}},directives:[ct.q,T.mP,l.JJ,l.On,v.yS,dt.H,A.Wj,_.O5,st.Q,_.sg,A.Zt,A.Bh,Z.jt,Z.iD,Z.Vi],pipes:[_.rS,_.uU],styles:[".cdk-drag-preview[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  border-radius: 4px;\n  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);\n}\n\n.cdk-drop-list-dragging[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]    > tbody[_ngcontent-%COMP%]    > tr.cdk-drop-list-dragging-over[_ngcontent-%COMP%] {\n  background-color: #f7fafc;\n}","[_nghost-%COMP%]     .p-treeselect {\n        width: 100%;\n        display: inline-flex;\n      }\n      [_nghost-%COMP%]     .p-treeselect:hover {\n        border-color: none;\n      }"]}),n}(),I=function(){function n(e){this.productsService=e}return n.prototype.resolve=function(e,r){var o=this;return new x.y(function(i){return o.productsService.getOptions().subscribe({next:function(d){i.next(!0),i.complete()}.bind(o),error:function(d){i.complete()}.bind(o)})})},n.\u0275fac=function(r){return new(r||n)(t.LFG(h.s))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),Zt=[{path:"",component:vt,resolve:{data:U.E},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"add",component:it,resolve:{data:I}},{path:"edit/:id",component:V,resolve:{data:w,options:I},runGuardsAndResolvers:"paramsOrQueryParamsChange"}],ht=function(){function n(){}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[v.Bz.forChild(Zt)],v.Bz]}),n}(),At=u(46726),bt=u(58203),Tt=function(){function n(){}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[U.E,w],imports:[[J.m,k.K,ht,P.ZQ.forRoot(),At.hJ,bt.Q,T.o6,A._t]]}),n}()}}]);