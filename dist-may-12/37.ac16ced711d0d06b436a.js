"use strict";(self.webpackChunkmyshops_admin=self.webpackChunkmyshops_admin||[]).push([[37],{75192:function(b,P,s){s.d(P,{H:function(){return C}});var n=s(90189),Z=s(61116),T=[[["","additional",""]],[["thead"]],[["tbody"]],[["app-pagination"]]],h=["[additional]","thead","tbody","app-pagination"],C=function(){function d(){}return d.prototype.ngOnInit=function(){},d.\u0275fac=function(_){return new(_||d)},d.\u0275cmp=n.Xpm({type:d,selectors:[["app-page-body"]],inputs:{title:"title"},ngContentSelectors:h,decls:15,vars:3,consts:[[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card","shadow"],[1,"card-header","border-0","d-flex","justify-content-between"],[1,"mb-0"],[1,"table-responsive","desktop-overflow-none","order-tables-style"],[1,"table","align-items-center","table-flush"],[1,"card-footer","py-4"]],template:function(_,l){1&_&&(n.F$t(T),n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"div",4),n.TgZ(5,"h3",5),n._uU(6),n.ALo(7,"titlecase"),n.qZA(),n.Hsn(8),n.qZA(),n.TgZ(9,"div",6),n.TgZ(10,"table",7),n.Hsn(11,1),n.Hsn(12,2),n.qZA(),n.qZA(),n.TgZ(13,"div",8),n.Hsn(14,3),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&_&&(n.xp6(6),n.Oqu(n.lcZ(7,1,l.title)))},pipes:[Z.rS],styles:[""]}),d}()},90065:function(b,P,s){s.d(P,{q:function(){return T}});var n=s(90189),Z=["*"],T=function(){function h(){}return h.prototype.ngOnInit=function(){},h.\u0275fac=function(d){return new(d||h)},h.\u0275cmp=n.Xpm({type:h,selectors:[["app-page-header"]],ngContentSelectors:Z,decls:4,vars:0,consts:[[1,"header","bg-gradient-dark","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body","invoice_list_header","mb--3","mb-md-0"]],template:function(d,t){1&d&&(n.F$t(),n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.Hsn(3),n.qZA(),n.qZA(),n.qZA())},styles:[""]}),h}()},60407:function(b,P,s){s.d(P,{Q:function(){return _}});var n=s(90189),Z=s(61116);function T(l,p){1&l&&(n.TgZ(0,"li",15),n.TgZ(1,"a",11),n._uU(2," ... "),n.qZA(),n.qZA())}var h=function(l){return{active:l}};function C(l,p){if(1&l){var m=n.EpF();n.ynx(0),n.TgZ(1,"li",16),n.NdJ("click",function(){var q=n.CHM(m).$implicit;return n.oxw().onPageChange(q)}),n.TgZ(2,"a",11),n._uU(3),n.qZA(),n.qZA(),n.BQk()}if(2&l){var o=p.$implicit,v=n.oxw();n.xp6(1),n.Q6J("ngClass",n.VKq(2,h,o===v.currentPage)),n.xp6(2),n.hij(" ",o," ")}}function d(l,p){1&l&&(n.TgZ(0,"li",15),n.TgZ(1,"a",11),n._uU(2," ... "),n.qZA(),n.qZA())}var t=function(l){return{disabled:l}},_=function(){function l(){this.pageChange=new n.vpe,this.currentPage=1,this.totalPage=1,this.visiblePageCount=5}return l.prototype.ngOnInit=function(){},l.prototype.onPageChange=function(p){p<1||p>this.totalPage||p===this.currentPage||this.pageChange.emit(p)},l.prototype.getVisiblePages=function(){var m,o,p=[];if(this.totalPage<=this.visiblePageCount)m=1,o=this.totalPage;else{var v=Math.floor(this.visiblePageCount/2),A=Math.ceil(this.visiblePageCount/2)-1;this.currentPage<=v+1?(m=1,o=this.visiblePageCount-1):this.currentPage>=this.totalPage-A?(m=this.totalPage-this.visiblePageCount+2,o=this.totalPage):(m=this.currentPage-v,o=this.currentPage+A)}for(var f=m;f<=o;f++)p.push(f);return p},l.prototype.shouldShowFirstEllipsis=function(){return this.currentPage>Math.ceil(this.visiblePageCount/2)},l.prototype.shouldShowLastEllipsis=function(){return this.currentPage<this.totalPage-Math.floor(this.visiblePageCount/2)},l.\u0275fac=function(m){return new(m||l)},l.\u0275cmp=n.Xpm({type:l,selectors:[["app-pagination"]],inputs:{currentPage:"currentPage",totalPage:"totalPage"},outputs:{pageChange:"pageChange"},decls:25,vars:15,consts:[["aria-label","..."],[1,"pagination","justify-content-end","mb-0"],["title","Start",1,"page-item",3,"ngClass","click"],["href","javascript:void(0)","tabindex","-1",1,"page-link"],[1,"fas","fa-angle-double-left"],[1,"sr-only"],["title","Previous",1,"page-item",3,"ngClass","click"],[1,"fas","fa-angle-left"],["class","page-item",4,"ngIf"],[4,"ngFor","ngForOf"],["title","Next",1,"page-item",3,"ngClass","click"],["href","javascript:void(0)",1,"page-link"],[1,"fas","fa-angle-right"],["title","End",1,"page-item",3,"ngClass","click"],[1,"fas","fa-angle-double-right"],[1,"page-item"],[1,"page-item",3,"ngClass","click"]],template:function(m,o){1&m&&(n.TgZ(0,"nav",0),n.TgZ(1,"ul",1),n.TgZ(2,"li",2),n.NdJ("click",function(){return o.onPageChange(1)}),n.TgZ(3,"a",3),n._UZ(4,"i",4),n.TgZ(5,"span",5),n._uU(6,"Start"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(7,"li",6),n.NdJ("click",function(){return o.onPageChange(o.currentPage-1)}),n.TgZ(8,"a",3),n._UZ(9,"i",7),n.TgZ(10,"span",5),n._uU(11,"Previous"),n.qZA(),n.qZA(),n.qZA(),n.YNc(12,T,3,0,"li",8),n.YNc(13,C,4,4,"ng-container",9),n.YNc(14,d,3,0,"li",8),n.TgZ(15,"li",10),n.NdJ("click",function(){return o.onPageChange(o.currentPage+1)}),n.TgZ(16,"a",11),n._UZ(17,"i",12),n.TgZ(18,"span",5),n._uU(19,"Next"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(20,"li",13),n.NdJ("click",function(){return o.onPageChange(o.totalPage)}),n.TgZ(21,"a",11),n._UZ(22,"i",14),n.TgZ(23,"span",5),n._uU(24,"End"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&m&&(n.xp6(2),n.Q6J("ngClass",n.VKq(7,t,1===o.currentPage)),n.xp6(5),n.Q6J("ngClass",n.VKq(9,t,1===o.currentPage)),n.xp6(5),n.Q6J("ngIf",o.shouldShowFirstEllipsis()),n.xp6(1),n.Q6J("ngForOf",o.getVisiblePages()),n.xp6(1),n.Q6J("ngIf",o.shouldShowLastEllipsis()),n.xp6(1),n.Q6J("ngClass",n.VKq(11,t,o.currentPage===o.totalPage)),n.xp6(5),n.Q6J("ngClass",n.VKq(13,t,o.currentPage===o.totalPage)))},directives:[Z.mk,Z.O5,Z.sg],styles:[".disabled[_ngcontent-%COMP%] {\n  pointer-events: none;\n}"]}),l}()},31037:function(b,P,s){s.r(P),s.d(P,{MailHistoryModule:function(){return I}});var n=s(22002),Z=s(8481),T=s(23278),h=s(78512),C=s(42693),d=s(44019),t=s(90189),_=function(){function e(i){this.httpService=i,this.listSubject=new h.X([]),this.list$=this.listSubject.asObservable(),this.currentPage=1,this.count=0}return e.prototype.getList=function(i,a,r){var c=this;void 0===i&&(i=10),void 0===a&&(a=1),void 0===r&&(r="");var u=new C.LE;return i&&(u=u.set("per_page",i)),a&&(u=u.set("page",a)),r&&(u=u.set("search",r)),this.httpService.getRequest("mail-history/",u).pipe((0,d.b)(function(g){c.count=g.totalRows,c.currentPage=g.page,c.listSubject.next(g.response)}))},e.prototype.getMailHistoryByID=function(i){return this.httpService.getRequest("mail-history/"+i)},e.\u0275fac=function(a){return new(a||e)(t.LFG(T.O))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),l=s(25201),p=function(){function e(i){this.activeModal=i}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(a){return new(a||e)(t.Y36(l.Kz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-view-email-data"]],inputs:{data:"data"},decls:15,vars:4,consts:[[1,"modal-content"],[1,"modal-header","modal-header-custom"],["id","modal-title-notification",1,"modal-title","text-dark","text-center"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"py-3","text-center"],[3,"innerHTML"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-link","ml-auto","cancel-outline-button",3,"click"]],template:function(a,r){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return r.activeModal.close(!1)}),t.TgZ(5,"span",4),t._uU(6,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"div",6),t.TgZ(9,"h3"),t._uU(10),t.qZA(),t._UZ(11,"div",7),t.qZA(),t.qZA(),t.TgZ(12,"div",8),t.TgZ(13,"button",9),t.NdJ("click",function(){return r.activeModal.close(!1)}),t._uU(14),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(3),t.hij(" ",r.data.subject," "),t.xp6(7),t.Oqu(r.data.to),t.xp6(1),t.Q6J("innerHTML",r.data.html,t.oJD),t.xp6(3),t.hij(" ",r.data.cancelButtonText||"Close"," "))},styles:[".modal-header-custom[_ngcontent-%COMP%] {\n  position: relative;\n}\n\n.modal-header-custom[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  flex: 0 0 100%;\n}\n\n.modal-header-custom[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%] {\n  position: absolute;\n  right: 10px;\n  top: 15px;\n}"]}),e}(),m=s(3492),o=s(85424),v=s(90065),A=s(75192),f=s(61116),q=s(60407);function U(e,i){if(1&e){var a=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(a);var c=t.oxw().$implicit;return t.oxw(2).readnotes(c.notes)}),t._uU(1,"Read notes"),t.qZA()}}function E(e,i){if(1&e){var a=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(a);var c=t.oxw().$implicit;return t.oxw(2).viewEmailData(c.email_data)}),t._uU(1,"View Mail"),t.qZA()}}function x(e,i){if(1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"uppercase"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t.YNc(15,U,2,0,"button",10),t.qZA(),t.TgZ(16,"td"),t.YNc(17,E,2,0,"button",10),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.ALo(20,"date"),t.qZA(),t.qZA()),2&e){var a=i.$implicit,r=i.index,c=t.oxw(2);t.xp6(2),t.Oqu((c.currentPage-1)*c.perPage+(r+1)),t.xp6(2),t.Oqu(a.purchaseOrderNumbe),t.xp6(2),t.Oqu(a.consultant_name),t.xp6(2),t.Oqu(a.consultant_email),t.xp6(2),t.Oqu(t.lcZ(11,9,a.client_name)),t.xp6(3),t.Oqu(a.client_email),t.xp6(2),t.Q6J("ngIf",a.notes),t.xp6(2),t.Q6J("ngIf",a.email_data),t.xp6(2),t.hij(" ",t.Dn7(20,11,a.created_at,"dd/MM/yyyy, hh:mm a","Australia/Adelaide")," ")}}function L(e,i){if(1&e&&(t.ynx(0),t.YNc(1,x,21,15,"tr",9),t.BQk()),2&e){var a=t.oxw();t.xp6(1),t.Q6J("ngForOf",a.list)}}function S(e,i){1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"th",12),t._uU(2,"No Mail found"),t.qZA(),t.qZA())}var H=function(){function e(i,a,r,c,u){var g=this;this.mailService=i,this.toastrService=a,this.ngbModal=r,this.route=c,this.router=u,this.list=[],this.currentPage=1,this.totalPage=1,this.perPage=10,this.count=1,this.search="",this.onSearch=function(y){g.router.navigate([],{relativeTo:g.route,queryParams:{search:y,page:1},queryParamsHandling:"merge"})},this.onPageChange=function(y){g.currentPage=y,g.navigateRoute()},this.navigateRoute=function(){g.router.navigate([],{relativeTo:g.route,queryParams:{page:g.currentPage}})}}return e.prototype.ngOnInit=function(){var i=this;this.mailService.list$.subscribe(function(a){i.list=function(e,i){for(var a=0,r=i.length,c=e.length;a<r;a++,c++)e[c]=i[a];return e}([],a),i.currentPage=+i.mailService.currentPage,i.perPage=10,i.count=+i.mailService.count,i.totalPage=Math.ceil(i.count/i.perPage)}),this.route.queryParams.subscribe(function(a){i.search=a.search||""})},e.prototype.readnotes=function(i){this.ngbModal.open(Z.A).componentInstance.data={notes:i,cancelButtonText:"Close"}},e.prototype.viewEmailData=function(i){this.ngbModal.open(p,{size:"xl",scrollable:!0}).componentInstance.data=JSON.parse(i)},e.\u0275fac=function(a){return new(a||e)(t.Y36(_),t.Y36(m._W),t.Y36(l.FF),t.Y36(o.gz),t.Y36(o.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:30,vars:5,consts:[[1,"row"],[1,"col-lg-3","col-6","mb-2","mb-lg-0"],["type","search","name","search","placeholder","Search","id","",1,"form-control",3,"value","search"],["title","Mail History"],[1,"thead-light"],["scope","col"],[4,"ngIf","ngIfElse"],["noVoucherExist",""],[3,"currentPage","totalPage","pageChange"],[4,"ngFor","ngForOf"],["type","button","class","btn btn-primary read-more-btn",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","read-more-btn",3,"click"],["colspan","8",1,"no-record-found"]],template:function(a,r){if(1&a&&(t.TgZ(0,"app-page-header"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"input",2),t.NdJ("search",function(g){return r.onSearch(g.target.value)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(4,"app-page-body",3),t.TgZ(5,"thead",4),t.TgZ(6,"tr"),t.TgZ(7,"th",5),t._uU(8,"#"),t.qZA(),t.TgZ(9,"th",5),t._uU(10,"Order no."),t.qZA(),t.TgZ(11,"th",5),t._uU(12,"Consultant Name"),t.qZA(),t.TgZ(13,"th",5),t._uU(14,"Consultant Email"),t.qZA(),t.TgZ(15,"th",5),t._uU(16,"Client Name"),t.qZA(),t.TgZ(17,"th",5),t._uU(18,"Client Email"),t.qZA(),t.TgZ(19,"th",5),t._uU(20,"Notes"),t.qZA(),t.TgZ(21,"th",5),t._uU(22,"Mail"),t.qZA(),t.TgZ(23,"th",5),t._uU(24,"Time/Date Mail Sent"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"tbody"),t.YNc(26,L,2,1,"ng-container",6),t.YNc(27,S,3,0,"ng-template",null,7,t.W1O),t.qZA(),t.TgZ(29,"app-pagination",8),t.NdJ("pageChange",function(g){return r.onPageChange(g)}),t.qZA(),t.qZA()),2&a){var c=t.MAs(28);t.xp6(3),t.Q6J("value",r.search),t.xp6(23),t.Q6J("ngIf",r.list.length)("ngIfElse",c),t.xp6(3),t.Q6J("currentPage",r.currentPage)("totalPage",r.totalPage)}},directives:[v.q,A.H,f.O5,q.Q,f.sg],pipes:[f.gd,f.uU],encapsulation:2}),e}(),J=s(48318),O=function(){function e(i){this.mailHistoryService=i}return e.prototype.resolve=function(i,a){var r=this,c=i.queryParams.page||1,g=i.queryParams.search;return new J.y(function(y){return r.mailHistoryService.getList(10,c,g).subscribe({next:function(k){y.next(1),y.complete()}.bind(r),error:function(k){y.complete()}.bind(r)})})},e.\u0275fac=function(a){return new(a||e)(t.LFG(_))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e}(),F=[{path:"",component:H,resolve:{data:O},runGuardsAndResolvers:"paramsOrQueryParamsChange"}],N=function(){function e(){}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[],imports:[[o.Bz.forChild(F)],o.Bz]}),e}(),w=s(42101),I=function(){function e(){}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[O,f.uU],imports:[[n.m,N,w.K]]}),e}()}}]);